{"version":3,"sources":["locflow.coffee","cache.coffee","csrf.coffee","dispatcher.coffee","interceptor.coffee","form.coffee","request.coffee","navigation.coffee","progressbar.coffee","router.coffee","renderer.coffee","snapshot.coffee","url.coffee","utils.coffee","visit.coffee","handler.coffee","browser.coffee","cordova_android.coffee","cordova_ios.coffee","json.coffee","querystring.coffee"],"names":[],"mappings":"AAAA;EAAA,IAAC,CAAA,OAAD,GACE;IAAA,OAAA,EAAS,OAAT;IAEA,SAAA,EAAc,CAAA,SAAA;aACZ,kCAAA,IAA8B;IADlB,CAAA,CAAH,CAAA,CAFX;IAKA,IAAA,EAAM,SAAA;aACJ,OAAO,CAAC,IAAR,CAAA;IADI,CALN;IAQA,OAAA,EAAS,SAAA;aACP,OAAO,CAAC,OAAR,CAAA;IADO,CART;IAWA,KAAA,EAAO,SAAC,IAAD,EAAO,IAAP;AACL,UAAA;MAAA,KAAA,GAAY,IAAA,OAAO,CAAC,KAAR,CAAc,IAAd,EAAoB,IAApB;MACZ,KAAK,CAAC,OAAN,CAAA;aACA;IAHK,CAXP;IAgBA,MAAA,EAAQ,SAAC,MAAD;AACN,UAAA;MAAA,IAAA,GAAW,IAAA,OAAO,CAAC,IAAR,CAAa,MAAb;aACX,IAAI,CAAC,MAAL,CAAA;IAFM,CAhBR;IAoBA,KAAA,EAAO,SAAC,IAAD,EAAO,QAAP;MACL,IAAC,CAAA,YAAD,IAAC,CAAA,UAAgB,IAAA,OAAO,CAAC,OAAR,CAAA;aACjB,IAAC,CAAA,OAAO,CAAC,KAAT,CAAe,IAAf,EAAqB,QAArB;IAFK,CApBP;IAwBA,KAAA,EAAO,SAAC,IAAD,EAAO,SAAP;MACL,IAAC,CAAA,WAAD,IAAC,CAAA,SAAe,IAAA,OAAO,CAAC,MAAR,CAAA;aAChB,IAAC,CAAA,MAAM,CAAC,QAAR,CAAiB,IAAjB,EAAuB,SAAvB;IAFK,CAxBP;IA4BA,UAAA,EAAY,SAAC,kBAAD;AACV,UAAA;;QADW,qBAAqB;;MAChC,IAAC,CAAA,OAAD,GAAe,IAAA,OAAO,CAAC,OAAO,CAAC,OAAhB,CAAA;MACf,IAAC,CAAA,QAAD,GAAgB,IAAA,OAAO,CAAC,QAAR,CAAA;MAChB,IAAC,CAAA,WAAD,IAAC,CAAA,SAAe,IAAA,OAAO,CAAC,MAAR,CAAA;MAChB,IAAC,CAAA,YAAD,IAAC,CAAA,UAAgB,IAAA,OAAO,CAAC,OAAR,CAAA;MACjB,IAAC,CAAA,WAAD,GAAmB,IAAA,OAAO,CAAC,WAAR,CAAA;MACnB,IAAC,CAAA,WAAW,CAAC,SAAb,CAAuB,QAAQ,CAAC,IAAI,CAAC,UAArC;MACA,IAAG,kBAAH;QACE,KAAA,GAAY,IAAA,OAAO,CAAC,KAAR,CAAkB,IAAA,OAAO,CAAC,GAAR,CAAY,QAAQ,CAAC,QAArB,CAAlB;QACZ,IAAC,CAAA,MAAM,CAAC,iBAAR,CAA0B,KAA1B;eACA,KAAK,CAAC,YAAN,CAAA,EAHF;;IAPU,CA5BZ;IAwCA,4BAAA,EAA8B,SAAC,QAAD,EAAW,QAAX;aAC5B,IAAC,CAAA,IAAD,GAAY,IAAA,OAAO,CAAC,IAAR,CAAa,QAAb,EAAuB,QAAvB;IADgB,CAxC9B;;;EA2CF,OAAO,CAAC,QAAR,GAAmB;;EACnB,OAAO,CAAC,OAAR,GAAkB;;EAElB,IAAG,OAAO,CAAC,SAAX;IACE,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,SAAC,EAAD;AAClC,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,GAAR,CAAY,QAAQ,CAAC,QAArB;MACV,KAAA,GAAY,IAAA,OAAO,CAAC,KAAR,CAAc,GAAd,EAAmB;QAAA,MAAA,EAAQ,SAAR;OAAnB;aACZ,KAAK,CAAC,OAAN,CAAA;IAHkC,CAApC;IAIA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,EAAgC,SAAA;aAAG,OAAO,CAAC,UAAR,CAAmB,IAAnB;IAAH,CAAhC,EALF;;AA/CA;;;ACOA;EAAM,OAAO,CAAC;IACC,eAAA;MACX,IAAC,CAAA,IAAD,GAAQ;MACR,IAAC,CAAA,KAAD,GAAS;IAFE;;oBAMb,OAAA,GAAS,SAAC,KAAD;MAAC,IAAC,CAAA,QAAD;aACR,IAAC,CAAA,sBAAD,CAAA;IADO;;oBAGT,gBAAA,GAAkB,SAAA;AAChB,UAAA;MAAA,MAAA,GAAS;AACT,WAAA,gBAAA;QACE,MAAM,CAAC,IAAP,CAAY,CAAC,GAAD,EAAM,IAAC,CAAA,IAAK,CAAA,GAAA,CAAI,CAAC,SAAjB,CAAZ;AADF;aAEA,MAAM,CAAC,IAAP,CAAY,SAAC,CAAD,EAAG,CAAH;eAAS,CAAE,CAAA,CAAA,CAAF,GAAO,CAAE,CAAA,CAAA;MAAlB,CAAZ,CAAiC,CAAC,GAAlC,CAAsC,SAAC,GAAD;eAAS,GAAI,CAAA,CAAA;MAAb,CAAtC;IAJgB;;oBAMlB,sBAAA,GAAwB,SAAA;AACtB,UAAA;MAAA,OAAA,GAAU,MAAM,CAAC,IAAP,CAAY,IAAC,CAAA,IAAb,CAAkB,CAAC,MAAnB,GAA4B,IAAC,CAAA;MACvC,UAAA,GAAa,IAAC,CAAA,gBAAD,CAAA;AACb;aAAM,OAAA,GAAU,CAAhB;QACE,GAAA,GAAM,UAAU,CAAC,KAAX,CAAA;QACN,IAAC,CAAA,MAAD,CAAQ,GAAR;qBACA,OAAA,IAAW;MAHb,CAAA;;IAHsB;;oBAQxB,GAAA,GAAK,SAAC,GAAD,EAAM,KAAN;MACH,IAAC,CAAA,IAAK,CAAA,GAAA,CAAN,GACE;QAAA,KAAA,EAAO,KAAP;QACA,SAAA,EAAe,IAAA,IAAA,CAAA,CAAM,CAAC,OAAP,CAAA,CADf;;aAEF,IAAC,CAAA,sBAAD,CAAA;IAJG;;oBAML,GAAA,GAAK,SAAC,GAAD,EAAM,YAAN;AACH,UAAA;MAAA,KAAA,uCAAkB,CAAE;MACpB,IAAG,KAAA,KAAS,MAAZ;eAA2B,aAA3B;OAAA,MAAA;eAA6C,MAA7C;;IAFG;;oBAIL,GAAA,GAAK,SAAC,GAAD;aACH,IAAC,CAAA,GAAD,CAAK,GAAL,CAAA,KAAe;IADZ;;oBAGL,MAAA,GAAQ,SAAC,GAAD;AACN,UAAA;MAAA,GAAA,GAAM,IAAC,CAAA,GAAD,CAAK,GAAL;MACN,OAAO,IAAC,CAAA,IAAK,CAAA,GAAA;aACb;IAHM;;oBAKR,SAAA,GAAW,SAAA;AACT,UAAA;AAAA;WAAA,gBAAA;qBAAA,IAAC,CAAA,MAAD,CAAQ,GAAR;AAAA;;IADS;;;;;AA1Cb;;;ACPA;EAAM,OAAO,CAAC;IACC,cAAC,QAAD,EAAY,QAAZ;MAAC,IAAC,CAAA,WAAD;MAAW,IAAC,CAAA,8BAAD,WAAY,IAAC,CAAA;IAAzB;;mBAEb,WAAA,GAAa,SAAA;AACX,UAAA;MAAA,IAAA,GAAO,QAAQ,CAAC,aAAT,CAAuB,aAAA,GAAc,IAAC,CAAA,QAAf,GAAwB,IAA/C;MACP,IAAuB,IAAvB;AAAA,eAAO,IAAI,CAAC,QAAZ;;IAFW;;mBAIb,WAAA,GAAa,SAAC,GAAD;AACX,UAAA;MAAA,KAAA,GAAQ,IAAC,CAAA,WAAD,CAAA;MACR,IAAG,KAAA,IAAU,GAAb;eACE,GAAI,CAAA,IAAC,CAAA,QAAD,CAAJ,GAAiB,MADnB;;IAFW;;;;;AAPf;;;ACAA;EAAM,OAAO,CAAC;IACC,oBAAC,MAAD;MAAC,IAAC,CAAA,0BAAD,SAAU;IAAX;;yBAEb,UAAA,GAAY,SAAC,OAAD,EAAU,SAAV,EAAqB,IAArB;AACV,UAAA;AAAA;WAAA,yCAAA;;qBACE,IAAC,CAAA,QAAD,CAAU,SAAV,EAAqB;UAAC,MAAA,EAAQ,MAAT;UAAiB,IAAA,EAAM,IAAvB;SAArB;AADF;;IADU;;yBAIZ,QAAA,GAAU,SAAC,SAAD,EAAY,GAAZ;AACR,UAAA;0BADoB,MAAiB,IAAhB,aAAA,QAAQ,WAAA;MAC7B,EAAA,GAAK,QAAQ,CAAC,WAAT,CAAqB,QAArB;MACL,EAAE,CAAC,SAAH,CAAa,IAAC,CAAA,aAAD,CAAe,SAAf,CAAb,EAAwC,IAAxC,EAA8C,IAA9C;MACA,EAAE,CAAC,IAAH,kBAAU,OAAO;MACjB,kBAAC,SAAS,QAAV,CAAmB,CAAC,aAApB,CAAkC,EAAlC;aACA;IALQ;;yBAOV,aAAA,GAAe,SAAC,IAAD;aACb,EAAA,GAAG,IAAC,CAAA,MAAJ,GAAa;IADA;;;;;;EAGjB,OAAO,CAAC,UAAR,GAAyB,IAAA,OAAO,CAAC,UAAR,CAAA;AAjBzB;;;ACAA;EAAM,OAAO,CAAC;;;0BACZ,SAAA,GAAW,SAAC,GAAD;MACT,GAAG,CAAC,gBAAJ,CAAqB,OAArB,EAA8B,IAAC,CAAA,OAAO,CAAC,IAAT,CAAc,IAAd,CAA9B;aACA,GAAG,CAAC,gBAAJ,CAAqB,QAArB,EAA+B,IAAC,CAAA,QAAQ,CAAC,IAAV,CAAe,IAAf,CAA/B;IAFS;;0BAIX,YAAA,GAAc,SAAC,GAAD;MACZ,IAAgB,IAAC,CAAA,gBAAD,CAAkB,GAAlB,CAAA,KAA0B,QAA1C;AAAA,eAAO,MAAP;;MACA,IAAe,IAAC,CAAA,gBAAD,CAAkB,GAAlB,CAAA,KAA0B,QAAzC;AAAA,eAAO,KAAP;;MACA,IAAe,IAAC,CAAA,eAAD,CAAiB,GAAjB,CAAA,KAAyB,QAAxC;AAAA,eAAO,KAAP;;aACA;IAJY;;0BAMd,gBAAA,GAAkB,SAAC,GAAD;AAChB,UAAA;MAAA,WAAA,GAAc,GAAA,IAAQ,GAAG,CAAC,YAAZ,IAA6B,GAAG,CAAC,YAAJ,CAAiB,cAAjB;MAC3C,IAAmB,WAAA,KAAe,OAAlC;AAAA,eAAO,SAAP;;MACA,IAAmB,WAAA,KAAe,MAAlC;AAAA,eAAO,SAAP;;aACA;IAJgB;;0BAMlB,eAAA,GAAiB,SAAC,GAAD;AACf,UAAA;MAAA,MAAA,GAAS,GAAG,CAAC;AACb,aAAM,MAAN;QACE,MAAA,GAAS,IAAC,CAAA,gBAAD,CAAkB,MAAlB;QACT,IAAiB,MAAA,KAAY,SAA7B;AAAA,iBAAO,OAAP;;QACA,MAAA,GAAS,MAAM,CAAC;MAHlB;aAIA;IANe;;0BAQjB,eAAA,GAAiB,SAAC,GAAD;aACf,IAAC,CAAA,eAAD,CAAiB,GAAjB,CAAA,KAA2B;IADZ;;0BAGjB,eAAA,GAAiB,SAAC,GAAD;AACf,aAAM,GAAG,CAAC,UAAV;QACE,IAAyB,GAAG,CAAC,UAAU,CAAC,OAAf,KAA0B,GAAnD;AAAA,iBAAO,GAAG,CAAC,WAAX;;QACA,GAAA,GAAM,GAAG,CAAC;MAFZ;aAGA;IAJe;;0BAMjB,OAAA,GAAS,SAAC,EAAD;AACP,UAAA;MAAA,MAAA,GAAS,EAAE,CAAC;MACZ,IAAG,MAAM,CAAC,OAAP,KAAkB,GAAlB,IAA0B,MAAM,CAAC,IAAjC,IAA0C,CAAI,IAAC,CAAA,YAAD,CAAc,MAAd,CAAjD;QACE,EAAE,CAAC,cAAH,CAAA;eACA,IAAC,CAAA,sBAAD,CAAwB,MAAxB,EAFF;OAAA,MAGK,IAAG,IAAC,CAAA,eAAD,CAAiB,MAAjB,CAAA,IAA6B,CAAI,IAAC,CAAA,YAAD,CAAc,IAAC,CAAA,eAAD,CAAiB,MAAjB,CAAd,CAApC;QACH,EAAE,CAAC,cAAH,CAAA;eACA,IAAC,CAAA,sBAAD,CAAwB,IAAC,CAAA,eAAD,CAAiB,MAAjB,CAAxB,EAFG;;IALE;;0BAST,sBAAA,GAAwB,SAAC,MAAD;AACtB,UAAA;MAAA,MAAA,GAAS,MAAM,CAAC,YAAP,CAAoB,aAApB,CAAA,IAAsC;MAC/C,IAAG,MAAM,CAAC,WAAP,CAAA,CAAA,KAA0B,KAA7B;QACE,OAAA,GAAc,IAAA,OAAO,CAAC,OAAR,CAAgB,MAAhB,EAAwB,MAAM,CAAC,IAA/B;eACd,OAAO,CAAC,IAAR,CAAA,EAFF;OAAA,MAAA;QAIE,IAAC,CAAA,KAAD,GAAa,IAAA,OAAO,CAAC,KAAR,CAAc,MAAM,CAAC,IAArB;eACb,IAAC,CAAA,KAAK,CAAC,OAAP,CAAA,EALF;;IAFsB;;0BASxB,QAAA,GAAU,SAAC,EAAD;AACR,UAAA;MAAA,UAAA,GAAa,EAAE,CAAC;MAChB,IAAG,UAAU,CAAC,YAAX,CAAwB,cAAxB,CAAA,KAA2C,QAA3C,IAAwD,CAAI,IAAC,CAAA,YAAD,CAAc,UAAd,CAA/D;QACE,EAAE,CAAC,cAAH,CAAA;QACA,IAAA,GAAW,IAAA,OAAO,CAAC,IAAR,CAAa,UAAb;eACX,IAAI,CAAC,MAAL,CAAA,EAHF;;IAFQ;;;;;AApDZ;;;ACAA;AAAA,MAAA;;EAAA,gBAAA,GAAmB,CACjB,MADiB,EACT,UADS,EACG,QADH,EACa,UADb,EACyB,OADzB,EACkC,QADlC,EAC4C,OAD5C,EACqD,QADrD;;EAIb,OAAO,CAAC;IACC,cAAC,IAAD;MAAC,IAAC,CAAA,OAAD;MACZ,IAAC,CAAA,UAAD,GAAc;IADH;;mBAGb,SAAA,GAAW,SAAA;AACT,UAAA;AAAA;AAAA,WAAA,qCAAA;;QACE,IAAC,CAAA,cAAD,CAAgB,OAAhB;AADF;aAEA,IAAC,CAAA;IAHQ;;mBAKX,MAAA,GAAQ,SAAA;AACN,UAAA;MAAA,EAAA,GAAK,OAAO,CAAC,UAAU,CAAC,QAAnB,CAA4B,QAA5B,EAAsC;QAAA,IAAA,EAAM;UAAE,IAAA,EAAM,IAAC,CAAA,IAAT;SAAN;OAAtC;MACL,IAAU,EAAE,CAAC,gBAAb;AAAA,eAAA;;MACA,MAAA,GAAS,IAAC,CAAA,IAAI,CAAC,YAAN,CAAmB,aAAnB,CAAA,IAAqC,IAAC,CAAA,IAAI,CAAC;MACpD,IAAC,CAAA,aAAD,GAAqB,IAAA,OAAO,CAAC,OAAR,CAAgB,MAAhB,EAAwB,IAAC,CAAA,IAAI,CAAC,MAA9B,EACnB;QAAA,OAAA,EACE;UAAA,QAAA,EAAU,mCAAV;SADF;OADmB;MAIrB,IAAC,CAAA,aAAa,CAAC,OAAf,CAAuB,IAAC,CAAA,eAAe,CAAC,IAAjB,CAAsB,IAAtB,CAAvB;MACA,IAAC,CAAA,aAAa,CAAC,KAAf,CAAqB,IAAC,CAAA,aAAa,CAAC,IAAf,CAAoB,IAApB,CAArB;aACA,IAAC,CAAA,aAAa,CAAC,IAAf,CAAoB,IAAC,CAAA,SAAD,CAAA,CAApB;IAVM;;mBAYR,eAAA,GAAiB,SAAC,QAAD,EAAW,MAAX,EAAmB,GAAnB;aACf,OAAO,CAAC,UAAU,CAAC,UAAnB,CAA8B,CAAC,QAAD,EAAW,IAAC,CAAA,IAAZ,CAA9B,EAAiD,gBAAjD,EACE;QAAA,IAAA,EACE;UAAA,IAAA,EAAM,IAAC,CAAA,IAAP;UACA,QAAA,EAAU,QADV;UAEA,MAAA,EAAQ,MAFR;SADF;OADF;IADe;;mBAQjB,aAAA,GAAe,SAAC,QAAD,EAAW,MAAX,EAAmB,GAAnB;aACb,OAAO,CAAC,UAAU,CAAC,UAAnB,CAA8B,CAAC,QAAD,EAAW,IAAC,CAAA,IAAZ,CAA9B,EAAiD,cAAjD,EACE;QAAA,IAAA,EACE;UAAA,IAAA,EAAM,IAAC,CAAA,IAAP;UACA,QAAA,EAAU,QADV;UAEA,MAAA,EAAQ,MAFR;SADF;OADF;IADa;;mBAQf,cAAA,GAAgB,SAAC,GAAD;MACd,IAAG,gBAAgB,CAAC,OAAjB,CAAyB,GAAG,CAAC,IAA7B,CAAA,KAAwC,CAAC,CAA5C;QACE,IAAC,CAAA,oBAAD,CAAsB,GAAtB,EADF;;MAEA,IAAG,YAAA,KAAgB,GAAG,CAAC,IAAvB;QACE,IAAC,CAAA,kBAAD,CAAoB,GAApB,EADF;;MAEA,IAAG,UAAA,KAAc,GAAG,CAAC,IAArB;QACE,IAAC,CAAA,iBAAD,CAAmB,GAAnB,EADF;;MAEA,IAAG,OAAA,KAAW,GAAG,CAAC,IAAlB;QACE,IAAC,CAAA,cAAD,CAAgB,GAAhB,EADF;;MAEA,IAAG,iBAAA,KAAqB,GAAG,CAAC,IAA5B;eACE,IAAC,CAAA,uBAAD,CAAyB,GAAzB,EADF;;IATc;;mBAYhB,oBAAA,GAAsB,SAAC,GAAD;aACpB,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,GAAG,CAAC;IADR;;mBAGtB,kBAAA,GAAoB,SAAC,GAAD;AAClB,UAAA;MAAA,QAAA,uDAAyC,CAAE;MAC3C,IAAoC,QAAQ,CAAC,IAAT,CAAA,CAAA,KAAqB,EAAzD;eAAA,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,SAAxB;;IAFkB;;mBAIpB,iBAAA,GAAmB,SAAC,GAAD;AACjB,UAAA;MAAA,UAAA,GAAa,QAAQ,CAAC,iBAAT,CAA2B,GAAG,CAAC,IAA/B;MACb,IAAG,UAAU,CAAC,MAAX,KAAqB,CAArB,IAA2B,GAAG,CAAC,OAAlC;eACE,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,KAD1B;OAAA,MAEK,IAAG,UAAU,CAAC,MAAX,GAAoB,CAAvB;QACH,MAAA,GAAS;AACT,aAAA,4CAAA;;UACE,IAA+B,QAAQ,CAAC,OAAxC;YAAA,MAAM,CAAC,IAAP,CAAY,QAAQ,CAAC,KAArB,EAAA;;AADF;eAEA,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,OAJrB;;IAJY;;mBAUnB,cAAA,GAAgB,SAAC,GAAD;AACd,UAAA;MAAA,MAAA,GAAS,QAAQ,CAAC,iBAAT,CAA2B,GAAG,CAAC,IAA/B;AACT;WAAA,wCAAA;;QACE,IAAuC,KAAK,CAAC,OAA7C;uBAAA,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,KAAK,CAAC,OAA9B;SAAA,MAAA;+BAAA;;AADF;;IAFc;;mBAKhB,uBAAA,GAAyB,SAAC,GAAD;AACvB,UAAA;MAAA,OAAA,GAAU,GAAG,CAAC;MACd,QAAA,GAAW;AACX,WAAA,yCAAA;;QACE,IAA+B,MAAM,CAAC,QAAtC;UAAA,QAAQ,CAAC,IAAT,CAAc,MAAM,CAAC,KAArB,EAAA;;AADF;MAEA,IAAoC,QAAQ,CAAC,MAAT,GAAkB,CAAtD;eAAA,IAAC,CAAA,UAAW,CAAA,GAAG,CAAC,IAAJ,CAAZ,GAAwB,SAAxB;;IALuB;;;;;AA3E3B;;;ACAA;EAAM,OAAO,CAAC;IACC,iBAAC,MAAD,EAAU,IAAV,EAAgB,KAAhB;MAAC,IAAC,CAAA,SAAD;MAAS,IAAC,CAAA,MAAD;MAAM,IAAC,CAAA,uBAAD,QAAQ;MACnC,IAAC,CAAA,aAAD,GAAiB,IAAC,CAAA,IAAI,CAAC,aAAN,IAAuB;MACxC,IAAC,CAAA,GAAD,GAAO;MACP,IAAC,CAAA,OAAD,GAAW;IAHA;;IAKb,OAAC,CAAA,GAAD,GAAM,SAAC,GAAD,EAAM,IAAN;AACJ,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B,IAA5B;MACV,GAAG,CAAC,IAAJ,CAAA;aACA;IAHI;;IAKN,OAAC,CAAA,IAAD,GAAO,SAAC,GAAD,EAAM,IAAN,EAAY,IAAZ;AACL,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,EAA6B,IAA7B;MACV,GAAG,CAAC,IAAJ,CAAS,IAAT;aACA;IAHK;;IAKP,OAAC,CAAA,GAAD,GAAM,SAAC,GAAD,EAAM,IAAN,EAAY,IAAZ;AACJ,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B,IAA5B;MACV,GAAG,CAAC,IAAJ,CAAS,IAAT;aACA;IAHI;;IAKN,OAAC,CAAA,MAAD,GAAS,SAAC,GAAD,EAAM,IAAN,EAAY,IAAZ;AACP,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,OAAR,CAAgB,QAAhB,EAA0B,GAA1B,EAA+B,IAA/B;MACV,GAAG,CAAC,IAAJ,CAAS,IAAT;aACA;IAHO;;sBAKT,OAAA,GAAS,SAAC,QAAD;aACP,IAAC,CAAA,IAAI,CAAC,OAAN,GAAgB;IADT;;sBAGT,KAAA,GAAO,SAAC,QAAD;aACL,IAAC,CAAA,IAAI,CAAC,KAAN,GAAc;IADT;;sBAGP,OAAA,GAAS,SAAC,QAAD;aACP,IAAC,CAAA,IAAI,CAAC,OAAN,GAAgB;IADT;;sBAGT,KAAA,GAAO,SAAA;AACL,UAAA;MAAA,IAAC,CAAA,OAAD,GAAW;2CACP,CAAE,KAAN,CAAA;IAFK;;sBAIP,aAAA,GAAe,SAAA;AACb,UAAA;MAAA,IAA0B,IAAC,CAAA,cAA3B;AAAA,eAAO,IAAC,CAAA,eAAR;;MACA,WAAA,iCAAkB,CAAE,iBAAN,CAAwB,cAAxB;MACd,IAAG,WAAA,IAAgB,WAAW,CAAC,OAAZ,CAAoB,kBAApB,CAAA,KAA2C,CAA9D;QACE,IAAC,CAAA,cAAD,GAAkB,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,GAAG,CAAC,YAAhB,EADpB;OAAA,MAEK,IAAG,WAAA,IAAgB,WAAW,CAAC,OAAZ,CAAoB,iBAApB,CAAA,KAA0C,CAA7D;QACH,IAAC,CAAA,cAAD,GAAkB,IAAC,CAAA,GAAG,CAAC;AACvB;UAAI,IAAA,CAAK,IAAC,CAAA,GAAG,CAAC,YAAV,EAAJ;SAAA,aAAA;UACM;;YAAO,OAAO,CAAC,gCAAiC,IAAC,CAAA,GAAG,CAAC;WAD3D;SAFG;OAAA,MAAA;QAKH,IAAC,CAAA,cAAD,GAAkB,IAAC,CAAA,GAAG,CAAC,aALpB;;aAML,IAAC,CAAA;IAXY;;sBAaf,eAAA,GAAiB,SAAA;AACf,UAAA;MAAA,MAAA,GAAa,IAAA,OAAO,CAAC,GAAR,CAAY,IAAC,CAAA,GAAb,CAAiB,CAAC,MAAlB,CAAA;MACb,IAAG,MAAA,KAAU,MAAb;eACE,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,QAAtB,EAAgC,mDAAhC,EADF;OAAA,MAEK,IAAG,MAAA,KAAU,MAAb;eACH,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,QAAtB,EAAgC,iCAAhC,EADG;OAAA,MAEA,IAAG,MAAA,KAAU,IAAb;eACH,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,QAAtB,EAAgC,gCAAhC,EADG;;IANU;;sBASjB,iBAAA,GAAmB,SAAA;AACjB,UAAA;MAAA,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,WAAtB,EAAmC,MAAnC;MACA,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,cAAtB,EAAsC,mCAAtC;MACA,sCAAe,CAAE,WAAd,CAAA,UAAH;QACE,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,cAAtB,EAAsC,OAAO,CAAC,IAAI,CAAC,WAAb,CAAA,CAAtC,EADF;;MAEA,IAAA,2CAAsB,CAAA,QAAA,WAAtB;eACE,IAAC,CAAA,eAAD,CAAA,EADF;;IALiB;;sBAQnB,OAAA,GAAS,SAAC,MAAD;AACP,UAAA;MAAA,IAAC,CAAA,aAAD,CAAA;MACA,IAAG,IAAC,CAAA,GAAD,IAAS,IAAC,CAAA,GAAG,CAAC,UAAL,GAAkB,CAA9B;sEACQ,CAAA,MAAA,EAAS,IAAC,CAAA,aAAD,CAAA,GAAkB,IAAC,CAAA,GAAG,CAAC,QAAQ,IAAC,CAAA,cADjD;;IAFO;;sBAKT,IAAA,GAAM,SAAC,IAAD;AACJ,UAAA;;QADK,OAAO;;MACZ,IAAC,CAAA,GAAD,GAAW,IAAA,cAAA,CAAA;MACX,IAAC,CAAA,GAAG,CAAC,IAAL,CAAU,IAAC,CAAA,MAAX,EAAmB,IAAC,CAAA,GAApB,EAAyB,IAAzB;MACA,IAAC,CAAA,iBAAD,CAAA;AACA;AAAA,WAAA,UAAA;;QACE,IAAC,CAAA,GAAG,CAAC,gBAAL,CAAsB,GAAtB,EAA2B,KAA3B;AADF;MAEA,IAAC,CAAA,GAAG,CAAC,eAAL,GAAuB,IAAC,CAAA,IAAI,CAAC;MAC7B,IAAC,CAAA,UAAD,GAAc,UAAA,CAAW,CAAA,SAAA,KAAA;eAAA,SAAA;UACvB,IAAU,KAAC,CAAA,OAAX;AAAA,mBAAA;;iBACA,KAAC,CAAA,OAAD,CAAS,SAAT;QAFuB;MAAA,CAAA,CAAA,CAAA,IAAA,CAAX,EAGZ,IAAC,CAAA,aAHW;MAId,IAAC,CAAA,GAAG,CAAC,OAAL,GAAe,CAAA,SAAA,KAAA;eAAA,SAAA;iBAAG,KAAC,CAAA,OAAD,CAAS,OAAT;QAAH;MAAA,CAAA,CAAA,CAAA,IAAA;MACf,IAAC,CAAA,GAAG,CAAC,kBAAL,GAA0B,CAAA,SAAA,KAAA;eAAA,SAAA;UACxB,IAAU,KAAC,CAAA,OAAX;AAAA,mBAAA;;UACA,IAAG,KAAC,CAAA,GAAG,CAAC,UAAL,KAAmB,CAAtB;YACE,YAAA,CAAa,KAAC,CAAA,UAAd;YACA,IAAG,KAAC,CAAA,GAAG,CAAC,MAAL,KAAe,GAAlB;qBACE,KAAC,CAAA,OAAD,CAAS,SAAT,EADF;aAAA,MAAA;qBAGE,KAAC,CAAA,OAAD,CAAS,OAAT,EAHF;aAFF;;QAFwB;MAAA,CAAA,CAAA,CAAA,IAAA;MAQ1B,QAAA,GAAW,IAAC,CAAA,UAAD,CAAY,IAAZ;aACX,IAAC,CAAA,GAAG,CAAC,IAAL,CAAU,QAAV;IArBI;;sBAuBN,UAAA,GAAY,SAAC,IAAD;AACV,UAAA;MAAA,IAAa,IAAC,CAAA,MAAD,KAAW,KAAxB;AAAA,eAAO,GAAP;;MACA,IAAG,IAAA,IAAS,OAAO,CAAC,IAApB;QACE,OAAO,CAAC,IAAI,CAAC,WAAb,CAAyB,IAAzB,EADF;;MAEA,OAAA,GAAc,IAAA,OAAO,CAAC,QAAQ,CAAC,IAAjB,CAAsB,IAAtB,CAA2B,CAAC,aAA5B,CAAA;aACd;IALU;;;;;AAjGd;;;ACAA;EAAM,OAAO,CAAC;;;yBACZ,OAAA,GAAS,SAAC,KAAD,EAAQ,KAAR;MACP,IAAG,KAAK,CAAC,MAAN,KAAkB,SAArB;eACE,KAAK,CAAC,WAAN,CAAA,EADF;;IADO;;yBAIT,OAAA,GAAS,SAAC,KAAD,EAAQ,KAAR;aACP,OAAO,CAAC,QAAQ,CAAC,KAAjB,CAAuB,KAAK,CAAC,GAAG,CAAC,QAAV,CAAA,CAAvB,EAA6C,QAAQ,CAAC,KAAtD;IADO;;yBAGT,OAAA,GAAS,SAAC,KAAD,EAAQ,KAAR;MACP,IAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAvB,CAA2B,KAAK,CAAC,GAAG,CAAC,QAAV,CAAA,CAA3B,CAAH;eACE,OAAO,CAAC,QAAQ,CAAC,MAAjB,CAAwB,KAAK,CAAC,GAAG,CAAC,QAAV,CAAA,CAAxB,EADF;OAAA,MAAA;eAGE,KAAK,CAAC,WAAN,CAAA,EAHF;;IADO;;;;;AARX;;;ACAA;AAAA,MAAA;;EAAM,OAAO,CAAC;AACZ,QAAA;;IAAA,kBAAA,GAAqB;;IAErB,WAAC,CAAA,UAAD,GAAa,uKAAA,GASW,kBATX,GAS8B,uBAT9B,GASoD,CAAC,kBAAA,GAAqB,CAAtB,CATpD,GAS4E,KAT5E,GASgF,CAAC,kBAAA,GAAqB,CAAtB,CAThF,GASwG;;IAKxG,qBAAA;;MACX,IAAC,CAAA,iBAAD,GAAqB,IAAC,CAAA,uBAAD,CAAA;MACrB,IAAC,CAAA,eAAD,GAAmB,IAAC,CAAA,qBAAD,CAAA;IAFR;;0BAIb,IAAA,GAAM,SAAA;MACJ,IAAA,CAAO,IAAC,CAAA,OAAR;QACE,IAAC,CAAA,OAAD,GAAW;QACX,IAAC,CAAA,wBAAD,CAAA;QACA,IAAC,CAAA,sBAAD,CAAA;eACA,IAAC,CAAA,cAAD,CAAA,EAJF;;IADI;;0BAON,IAAA,GAAM,SAAA;MACJ,IAAG,IAAC,CAAA,OAAD,IAAa,CAAI,IAAC,CAAA,MAArB;QACE,IAAC,CAAA,MAAD,GAAU;eACV,IAAC,CAAA,mBAAD,CAAqB,CAAA,SAAA,KAAA;iBAAA,SAAA;YACnB,KAAC,CAAA,wBAAD,CAAA;YACA,KAAC,CAAA,aAAD,CAAA;YACA,KAAC,CAAA,OAAD,GAAW;mBACX,KAAC,CAAA,MAAD,GAAU;UAJS;QAAA,CAAA,CAAA,CAAA,IAAA,CAArB,EAFF;;IADI;;0BASN,QAAA,GAAU,SAAC,KAAD;MAAC,IAAC,CAAA,QAAD;aACT,IAAC,CAAA,OAAD,CAAA;IADQ;;0BAGV,wBAAA,GAA0B,SAAA;aACxB,QAAQ,CAAC,IAAI,CAAC,YAAd,CAA2B,IAAC,CAAA,iBAA5B,EAA+C,QAAQ,CAAC,IAAI,CAAC,UAA7D;IADwB;;0BAG1B,sBAAA,GAAwB,SAAA;MACtB,IAAC,CAAA,eAAe,CAAC,KAAK,CAAC,KAAvB,GAA+B;MAC/B,IAAC,CAAA,eAAe,CAAC,KAAK,CAAC,OAAvB,GAAiC;MACjC,QAAQ,CAAC,eAAe,CAAC,YAAzB,CAAsC,IAAC,CAAA,eAAvC,EAAwD,QAAQ,CAAC,IAAjE;aACA,IAAC,CAAA,OAAD,CAAA;IAJsB;;0BAMxB,mBAAA,GAAqB,SAAC,QAAD;MACnB,IAAC,CAAA,eAAe,CAAC,KAAK,CAAC,OAAvB,GAAiC;aACjC,UAAA,CAAW,QAAX,EAAqB,kBAAA,GAAqB,GAA1C;IAFmB;;0BAIrB,wBAAA,GAA0B,SAAA;MACxB,IAAG,IAAC,CAAA,eAAe,CAAC,UAApB;eACE,QAAQ,CAAC,eAAe,CAAC,WAAzB,CAAqC,IAAC,CAAA,eAAtC,EADF;;IADwB;;0BAI1B,cAAA,GAAgB,SAAA;4CACd,IAAC,CAAA,kBAAD,IAAC,CAAA,kBAAmB,WAAA,CAAY,IAAC,CAAA,OAAb,EAAsB,kBAAtB;IADN;;0BAGhB,aAAA,GAAe,SAAA;MACb,aAAA,CAAc,IAAC,CAAA,eAAf;aACA,IAAC,CAAA,eAAD,GAAmB;IAFN;;0BAIf,OAAA,GAAS,SAAA;aACP,IAAC,CAAA,QAAD,CAAU,IAAC,CAAA,KAAD,GAAS,IAAI,CAAC,MAAL,CAAA,CAAA,GAAgB,GAAnC;IADO;;0BAGT,OAAA,GAAS,SAAA;aACP,qBAAA,CAAsB,CAAA,SAAA,KAAA;eAAA,SAAA;iBACpB,KAAC,CAAA,eAAe,CAAC,KAAK,CAAC,KAAvB,GAAiC,CAAC,EAAA,GAAK,CAAC,KAAC,CAAA,KAAD,GAAS,EAAV,CAAN,CAAA,GAAoB;QADjC;MAAA,CAAA,CAAA,CAAA,IAAA,CAAtB;IADO;;0BAIT,uBAAA,GAAyB,SAAA;AACvB,UAAA;MAAA,OAAA,GAAU,QAAQ,CAAC,aAAT,CAAuB,OAAvB;MACV,OAAO,CAAC,IAAR,GAAe;MACf,OAAO,CAAC,WAAR,GAAsB,IAAC,CAAA,WAAW,CAAC;aACnC;IAJuB;;0BAMzB,qBAAA,GAAuB,SAAA;AACrB,UAAA;MAAA,OAAA,GAAU,QAAQ,CAAC,aAAT,CAAuB,KAAvB;MACV,OAAO,CAAC,SAAR,GAAoB;aACpB;IAHqB;;;;;AA7EzB;;;ACAA;AAAA,MAAA;;EAAA,MAAA,GAAS;;EAEH,OAAO,CAAC;IACC,gBAAA;MACX,IAAC,CAAA,MAAD,GAAU;MACV,IAAC,CAAA,iBAAD,GAAyB,IAAA,OAAO,CAAC,UAAR,CAAA;MACzB,IAAC,CAAA,iBAAiB,CAAC,KAAnB,GAA2B,OAAO,CAAC;IAHxB;;qBAKb,SAAA,GAAW,SAAA;aACT,IAAC,CAAA,MAAD,GAAU;IADD;;qBAGX,QAAA,GAAU,SAAC,IAAD,EAAO,SAAP;AACR,UAAA;MAAA,KAAA,GACE;QAAA,KAAA,EAAW,IAAA,OAAO,CAAC,KAAR,CAAA,CAAX;QACA,GAAA,EAAS,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,CADT;QAEA,OAAA,EAAS,SAAS,CAAC,OAFnB;QAGA,OAAA,EAAS,SAAS,CAAC,OAHnB;QAIA,OAAA,EAAS,SAAS,CAAC,OAJnB;;MAKF,IAAC,CAAA,MAAM,CAAC,IAAR,CAAa,KAAb;aACA;IARQ;;qBAUV,SAAA,GAAW,SAAC,IAAD;AACT,UAAA;AAAA;AAAA,WAAA,qCAAA;;QACE,IAAgB,KAAK,CAAC,GAAG,CAAC,KAAV,CAAoB,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,CAApB,CAAhB;AAAA,iBAAO,MAAP;;AADF;aAEA,IAAC,CAAA;IAHQ;;qBAKX,iBAAA,GAAmB,SAAC,KAAD;AACjB,UAAA;MAAA,KAAA,GAAQ,IAAC,CAAA,SAAD,CAAW,KAAK,CAAC,GAAjB;MACR,IAAG,KAAA,YAAiB,OAAO,CAAC,UAA5B;QACE,IAAC,CAAA,YAAD,GAAgB;eAChB,IAAC,CAAA,WAAD,GAAe,MAFjB;OAAA,MAAA;eAIE,IAAC,CAAA,qBAAD,CAAuB,KAAvB,EAA8B,KAA9B,EAJF;;IAFiB;;qBAQnB,WAAA,GAAa,SAAC,KAAD;AACX,UAAA;MAAA,KAAA,GAAQ,IAAC,CAAA,SAAD,CAAW,KAAK,CAAC,GAAjB;aACR,IAAC,CAAA,qBAAD,CAAuB,KAAvB,EAA8B,KAA9B;IAFW;;qBAIb,qBAAA,GAAuB,SAAC,KAAD,EAAQ,KAAR;AACrB,UAAA;;WAAa,CAAE,OAAf,CAAuB,IAAC,CAAA,WAAxB,EAAqC,IAAC,CAAA,YAAY,CAAC,KAAnD;;MACA,IAAC,CAAA,YAAD,GAAgB;MAChB,IAAC,CAAA,WAAD,GAAe;MACf,IAAG,KAAK,CAAC,MAAN,KAAkB,SAArB;+BACE,KAAK,CAAE,OAAP,CAAe,KAAf,EAAsB,KAAK,CAAC,KAA5B,WADF;;IAJqB;;qBAOvB,OAAA,GAAS,SAAC,KAAD;AACP,UAAA;MAAA,KAAA,GAAQ,IAAC,CAAA,SAAD,CAAW,KAAK,CAAC,GAAjB;;;UACR,KAAK,CAAE,QAAS,OAAO,KAAK,CAAC;;;MAC7B,IAAG,KAAK,CAAC,MAAN,KAAgB,SAAnB;eACE,UAAA,CAAW,SAAA;iBAAG,KAAK,CAAC,MAAN,CAAA;QAAH,CAAX,EADF;;IAHO;;;;;AA7CX;;;ACAA;EAAM,OAAO,CAAC;IACC,kBAAA;MACX,IAAC,CAAA,KAAD,GAAa,IAAA,OAAO,CAAC,KAAR,CAAA;IADF;;uBAGb,SAAA,GAAW,SAAA;aACT,QAAQ,CAAC,IAAI,CAAC,SAAd,CAAwB,IAAxB;IADS;;uBAGX,qBAAA,GAAuB,SAAA;AACrB,UAAA;MAAA,iBAAA,GAAoB,QAAQ,CAAC,gBAAT,CAClB,iDADkB;AAGpB,WAAA,mDAAA;;QACE,IAAG,CAAC,GAAG,CAAC,EAAR;AACE,gBAAU,IAAA,KAAA,CAAM,mCAAN,EADZ;;AADF;aAGA;IAPqB;;uBASvB,uBAAA,GAAyB,SAAA;AACvB,UAAA;MAAA,iBAAA,GAAoB,IAAC,CAAA,qBAAD,CAAA;AACpB,WAAA,mDAAA;;QACE,YAAA,GAAe,GAAG,CAAC,SAAJ,CAAc,KAAd;QACf,YAAY,CAAC,YAAb,CAA0B,cAA1B,EAA0C,MAA1C;QACA,GAAG,CAAC,UAAU,CAAC,YAAf,CAA4B,YAA5B,EAA0C,GAA1C;AAHF;aAIA;IANuB;;uBAQzB,+BAAA,GAAiC,SAAA;AAC/B,UAAA;MAAA,UAAA,GAAa,IAAC,CAAA,uBAAD,CAAA;MACb,iBAAA,GAAoB,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,UAAX,CAAA,IAA0B;MAC9C,gBAAA,GAAmB,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAtB,CAA2B,iBAA3B;AACnB,WAAA,4CAAA;;QACE,KAAA,GAAQ;AACR,aAAA,qDAAA;;UACE,IAAG,SAAS,CAAC,EAAV,KAAgB,gBAAgB,CAAC,EAApC;YACE,KAAA,GAAQ;AACR,kBAFF;;AADF;QAIA,IAAG,CAAI,KAAP;UACE,gBAAgB,CAAC,IAAjB,CAAsB,SAAtB,EADF;;AANF;MAQA,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,UAAX,EAAuB,gBAAvB;aACA;IAb+B;;uBAejC,sBAAA,GAAwB,SAAC,iBAAD;AACtB,UAAA;AAAA;WAAA,mDAAA;;QACE,kBAAA,GAAqB,QAAQ,CAAC,cAAT,CAAwB,GAAG,CAAC,EAA5B;QACrB,IAAG,kBAAH;uBACE,kBAAkB,CAAC,UAAU,CAAC,YAA9B,CAA2C,GAA3C,EAAgD,kBAAhD,GADF;SAAA,MAAA;+BAAA;;AAFF;;IADsB;;uBAMxB,4BAAA,GAA8B,SAAA;aAC5B,IAAC,CAAA,sBAAD,CAAwB,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,UAAX,EAAuB,EAAvB,CAAxB;IAD4B;;uBAG9B,QAAA,GAAU,SAAC,OAAD,EAAU,OAAV;aACR,MAAM,CAAC,QAAP,CAAgB,OAAhB,EAAyB,OAAzB;IADQ;;uBAGV,eAAA,GAAiB,SAAC,IAAD;AACf,UAAA;MAAA,IAAA,GAAO,IAAI,CAAC,oBAAL,CAA0B,MAA1B;MACP,IAAG,IAAI,CAAC,MAAL,KAAe,CAAlB;QACE,IAAA,GAAO,IAAK,CAAA,CAAA;eACZ,IAAI,CAAC,oBAAL,CAA0B,MAA1B,EAFF;OAAA,MAAA;eAIE,GAJF;;IAFe;;uBAQjB,YAAA,GAAc,SAAC,IAAD;AACZ,UAAA;MAAA,SAAA,GAAY,IAAI,CAAC,oBAAL,CAA0B,OAA1B;MACZ,IAAG,SAAS,CAAC,MAAV,KAAoB,CAAvB;eACE,SAAU,CAAA,CAAA,CAAE,CAAC,UADf;OAAA,MAAA;eAGE,QAAQ,CAAC,MAHX;;IAFY;;uBAOd,WAAA,GAAa,SAAC,KAAD;aACX,QAAQ,CAAC,KAAT,GAAiB;IADN;;uBAGb,aAAA,GAAe,SAAC,IAAD;AACb,UAAA;AAAA;WAAA,sCAAA;;QACE,IAAA,CAAA,CAAgB,IAAA,IAAS,IAAI,CAAC,IAA9B,CAAA;AAAA,mBAAA;;QACA,WAAA,GAAc,QAAQ,CAAC,aAAT,CAAuB,cAAA,GAAe,IAAI,CAAC,IAApB,GAAyB,KAAhD;QACd,IAAG,WAAH;uBACE,WAAW,CAAC,OAAZ,GAAsB,IAAI,CAAC,SAD7B;SAAA,MAAA;uBAGE,QAAQ,CAAC,IAAI,CAAC,WAAd,CAA0B,IAA1B,GAHF;;AAHF;;IADa;;uBASf,WAAA,GAAa,SAAC,IAAD;AACX,UAAA;MAAA,IAAA,GAAO,IAAI,CAAC,oBAAL,CAA0B,MAA1B;MACP,IAAG,IAAI,CAAC,MAAL,KAAe,CAAlB;eACE,IAAK,CAAA,CAAA,EADP;OAAA,MAAA;AAGE,cAAU,IAAA,KAAA,CAAM,4BAAN,EAHZ;;IAFW;;uBAOb,yBAAA,GAA2B,SAAC,IAAD;AACzB,UAAA;MAAA,OAAA,GAAU,MAAM,CAAC;MACjB,OAAA,GAAU,MAAM,CAAC;MACjB,IAAC,CAAA,+BAAD,CAAA;MACA,UAAA,GAAa,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,YAAzB,CAAsC,IAAtC,EAA4C,QAAQ,CAAC,IAArD;MACb,IAAC,CAAA,4BAAD,CAAA;aACA,OAAO,CAAC,QAAQ,CAAC,eAAjB,CAAiC,UAAjC,EAA6C,OAA7C,EAAsD,OAAtD;IANyB;;uBAQ3B,MAAA,GAAQ,SAAC,UAAD;AACN,UAAA;MAAA,EAAA,GAAK,QAAQ,CAAC,aAAT,CAAuB,MAAvB;MACL,EAAE,CAAC,SAAH,GAAe;MACf,IAAC,CAAA,WAAD,CAAa,IAAC,CAAA,YAAD,CAAc,EAAd,CAAb;MACA,IAAC,CAAA,aAAD,CAAe,IAAC,CAAA,eAAD,CAAiB,EAAjB,CAAf;aACA,IAAC,CAAA,yBAAD,CAA2B,IAAC,CAAA,WAAD,CAAa,EAAb,CAA3B;IALM;;;;;AA7FV;;;ACAA;EAAM,OAAO,CAAC;IACC,kBAAA;MACX,IAAC,CAAA,KAAD,GAAa,IAAA,OAAO,CAAC,KAAR,CAAA;IADF;;uBAGb,KAAA,GAAO,SAAC,IAAD,EAAO,KAAP;aACL,IAAC,CAAA,MAAD,GACE;QAAA,IAAA,EAAM,IAAN;QACA,KAAA,EAAO,KADP;;IAFG;;uBAKP,eAAA,GAAiB,SAAC,IAAD,EAAO,OAAP,EAAgB,OAAhB;MACf,IAAG,IAAC,CAAA,MAAJ;QACE,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,IAAC,CAAA,MAAM,CAAC,IAAnB,EAAyB;UACvB,MAAA,IADuB;UACjB,SAAA,OADiB;UACR,SAAA,OADQ;UACC,KAAA,EAAO,IAAC,CAAA,MAAM,CAAC,KADhB;SAAzB;eAGA,IAAC,CAAA,MAAD,GAAU,KAJZ;;IADe;;uBAOjB,MAAA,GAAQ,SAAC,GAAD;AACN,UAAA;MAAA,MAAA,GAAS,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,GAAX;MACT,IAAG,MAAH;QACE,OAAO,CAAC,QAAQ,CAAC,yBAAjB,CAA2C,MAAM,CAAC,IAAlD;QACA,OAAO,CAAC,QAAQ,CAAC,QAAjB,CAA0B,MAAM,CAAC,OAAjC,EAA0C,MAAM,CAAC,OAAjD;eACA,OAAO,CAAC,QAAQ,CAAC,WAAjB,CAA6B,MAAM,CAAC,KAApC,EAHF;;IAFM;;;;;;EAOV,OAAO,CAAC,QAAR,GAAuB,IAAA,OAAO,CAAC,QAAR,CAAA;AAvBvB;;;ACAA;EAAM,OAAO,CAAC;IACC,aAAC,GAAD;MACX,IAAG,GAAA,YAAe,OAAO,CAAC,GAA1B;QACE,IAAC,CAAA,WAAD,CAAa,GAAb,EADF;OAAA,MAEK,IAAG,GAAA,IAAQ,GAAG,CAAC,IAAZ,IAAqB,GAAG,CAAC,QAA5B;QACH,IAAC,CAAA,gBAAD,CAAkB,GAAlB,EADG;OAAA,MAEA,IAAG,QAAA,KAAY,OAAO,GAAtB;QACH,IAAC,CAAA,oBAAD,CAAsB,GAAtB,EADG;;IALM;;kBAQb,WAAA,GAAa,SAAC,GAAD;MACX,IAAC,CAAA,QAAD,GAAY,GAAG,CAAC;MAChB,IAAC,CAAA,MAAD,GAAU,GAAG,CAAC;MACd,IAAC,CAAA,KAAD,GAAS,GAAG,CAAC;MACb,IAAC,CAAA,IAAD,GAAQ,GAAG,CAAC;MACZ,IAAC,CAAA,IAAD,GAAQ,GAAG,CAAC;aACZ,IAAC,CAAA,IAAD,GAAQ,GAAG,CAAC;IAND;;kBAQb,gBAAA,GAAkB,SAAC,QAAD;MAChB,IAAC,CAAA,QAAD,GAAY,QAAQ,CAAC,QAAQ,CAAC,OAAlB,CAA0B,GAA1B,EAA+B,EAA/B;MACZ,IAAC,CAAA,MAAD,GAAU,QAAQ,CAAC;MACnB,IAAC,CAAA,KAAD,GAAS,QAAQ,CAAC;MAClB,IAAC,CAAA,IAAD,GAAQ,QAAQ,CAAC;MACjB,IAAC,CAAA,IAAD,GAAQ,QAAQ,CAAC;MACjB,IAAC,CAAA,IAAD,GAAQ,QAAQ,CAAC;MACjB,IAAG,IAAC,CAAA,MAAM,CAAC,OAAR,CAAgB,GAAhB,CAAA,KAA0B,CAAC,CAA9B;eACE,IAAC,CAAA,MAAD,GAAU,IAAC,CAAA,MAAM,CAAC,KAAR,CAAc,GAAd,CAAmB,CAAA,CAAA,EAD/B;;IAPgB;;kBAUlB,oBAAA,GAAsB,SAAC,GAAD;AACpB,UAAA;MAAA,KAAA,GAAQ;MACR,OAAA,GAAU,GAAG,CAAC,WAAJ,CAAA,CAAiB,CAAC,KAAlB,CAAwB,KAAxB;MACV,IAAG,OAAH;QACE,IAAC,CAAA,QAAD,GAAY,CAAC,OAAQ,CAAA,CAAA,CAAR,IAAc,EAAf,CAAkB,CAAC,OAAnB,CAA2B,KAA3B,EAAkC,EAAlC;QACZ,IAAC,CAAA,MAAD,GAAU,OAAQ,CAAA,CAAA,CAAR,IAAc;QACxB,IAAC,CAAA,IAAD,GAAQ,OAAQ,CAAA,CAAA;QAChB,IAAC,CAAA,KAAD,GAAS,OAAQ,CAAA,CAAA;QACjB,IAAC,CAAA,IAAD,GAAQ,OAAQ,CAAA,CAAA;QAChB,IAAC,CAAA,IAAD,GAAQ;QACR,IAAG,IAAC,CAAA,MAAM,CAAC,OAAR,CAAgB,GAAhB,CAAA,KAA0B,CAAC,CAA9B;UACE,KAAA,GAAQ,IAAC,CAAA,MAAM,CAAC,KAAR,CAAc,GAAd;UACR,IAAC,CAAA,MAAD,GAAU,KAAM,CAAA,CAAA;iBAChB,IAAC,CAAA,IAAD,GAAQ,KAAM,CAAA,CAAA,EAHhB;SAPF;;IAHoB;;kBAetB,QAAA,GAAU,SAAA;AACR,UAAA;MAAA,MAAA,GAAS;MACT,MAAA,IAAa,IAAC,CAAA,QAAJ,GAAkB,IAAC,CAAA,QAAD,GAAY,KAA9B,GAAyC,QAAQ,CAAC,QAAQ,CAAC,QAAlB,GAA6B;MAChF,MAAA,IAAa,IAAC,CAAA,MAAJ,GAAgB,IAAC,CAAA,MAAjB,GAA6B,QAAQ,CAAC,QAAQ,CAAC;MACzD,MAAA,IAAa,IAAC,CAAA,IAAJ,GAAc,GAAA,GAAM,IAAC,CAAA,IAArB,GAA+B;aACzC,MAAA,GAAS,CAAC,IAAC,CAAA,IAAD,IAAS,GAAV,CAAT,GAA0B,IAAC,CAAA,KAA3B,GAAmC,IAAC,CAAA;IAL5B;;kBAOV,WAAA,GAAa,SAAA;aACP,IAAA,OAAO,CAAC,QAAQ,CAAC,WAAjB,CAA6B,IAAC,CAAA,KAA9B,CAAoC,CAAC,MAArC,CAAA;IADO;;kBAGb,cAAA,GAAgB,SAAC,GAAD;aACd,IAAC,CAAA,KAAD,GAAS,GAAA,GAAU,IAAA,OAAO,CAAC,QAAQ,CAAC,IAAjB,CAAsB,GAAtB,CAA0B,CAAC,aAA3B,CAAA;IADL;;kBAGhB,WAAA,GAAa,SAAA;AACX,UAAA;MAAA,QAAA,GAAe,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;MACf,QAAQ,CAAC,IAAT,GAAgB;aAChB;IAHW;;kBAKb,MAAA,GAAQ,SAAA;MACN,IAAG,IAAC,CAAA,IAAI,CAAC,OAAN,CAAc,OAAd,CAAA,KAA0B,IAAC,CAAA,IAAI,CAAC,MAAN,GAAe,OAAO,CAAC,MAApD;eACE,OADF;OAAA,MAEK,IAAG,IAAC,CAAA,IAAI,CAAC,OAAN,CAAc,KAAd,CAAA,KAAwB,IAAC,CAAA,IAAI,CAAC,MAAN,GAAe,KAAK,CAAC,MAAhD;eACH,KADG;OAAA,MAAA;eAGH,OAHG;;IAHC;;kBAQR,KAAA,GAAO,SAAC,KAAD;AACL,UAAA;MAAA,UAAA,GAAa,IAAC,CAAA,SAAD,CAAW,KAAX;MACb,UAAA,GAAa,IAAC,CAAA,SAAD,CAAW,KAAX;MACb,IAAA,CAAA,CAAoB,UAAA,IAAe,UAAnC,CAAA;AAAA,eAAO,MAAP;;aACA,OAAO,CAAC,YAAR,CAAqB,UAArB,EAAiC,UAAjC;IAJK;;kBAMP,SAAA,GAAW,SAAC,KAAD;AACT,UAAA;MAAA,IAAA,CAAA,CAAsC,KAAA,YAAiB,OAAO,CAAC,GAA/D,CAAA;QAAA,KAAA,GAAY,IAAA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAZ;;MACA,IAAa,IAAC,CAAA,IAAD,KAAS,KAAK,CAAC,IAA5B;AAAA,eAAO,GAAP;;MACA,KAAA,GAAQ,IAAC,CAAA,IAAI,CAAC,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAwB,CAAC,KAAzB,CAA+B,GAA/B;MACR,UAAA,GAAa,KAAK,CAAC,IAAI,CAAC,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,CAA6B,CAAC,KAA9B,CAAoC,GAApC;MACb,IAAgB,KAAK,CAAC,MAAN,KAAkB,UAAU,CAAC,MAA7C;AAAA,eAAO,MAAP;;MACA,WAAA,GAAc;AACd,WAAA,uDAAA;;QACE,SAAA,GAAY,UAAW,CAAA,KAAA;QACvB,IAAG,KAAK,CAAC,IAAN,CAAW,IAAX,CAAH;UACE,IAAA,GAAO,IAAI,CAAC,OAAL,CAAa,KAAb,EAAoB,EAApB;UACP,IAAG,WAAY,CAAA,IAAA,CAAf;AACE,kBAAU,IAAA,KAAA,CAAM,OAAA,GAAO,CAAC,IAAC,CAAA,QAAD,CAAA,CAAD,CAAP,GAAoB,oCAApB,GAAwD,IAAxD,GAA6D,GAAnE,EADZ;;UAEA,WAAY,CAAA,IAAA,CAAZ,GAAoB,UAJtB;SAAA,MAKK,IAAG,IAAA,KAAU,SAAb;AACH,iBAAO,MADJ;;AAPP;aASA;IAhBS;;kBAkBX,SAAA,GAAW,SAAC,GAAD;AACT,UAAA;MAAA,IAAA,CAAA,CAAkC,GAAA,YAAe,OAAO,CAAC,GAAzD,CAAA;QAAA,GAAA,GAAU,IAAA,OAAO,CAAC,GAAR,CAAY,GAAZ,EAAV;;MACA,IAAa,IAAC,CAAA,IAAD,KAAS,GAAG,CAAC,IAA1B;AAAA,eAAO,GAAP;;MACA,YAAA,GAAmB,IAAA,OAAO,CAAC,QAAQ,CAAC,WAAjB,CAA6B,IAAC,CAAA,IAAI,CAAC,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAA7B;MACnB,kBAAA,GAAyB,IAAA,OAAO,CAAC,QAAQ,CAAC,WAAjB,CAA6B,GAAG,CAAC,IAAI,CAAC,OAAT,CAAiB,GAAjB,EAAsB,EAAtB,CAA7B;MACzB,IAAA,CAAA,CAAoB,YAAY,CAAC,OAAb,CAAA,CAAA,IAA2B,kBAAkB,CAAC,OAAnB,CAAA,CAA/C,CAAA;AAAA,eAAO,MAAP;;MACA,SAAA,GAAY,YAAY,CAAC,MAAb,CAAA;MACZ,eAAA,GAAkB,kBAAkB,CAAC,MAAnB,CAAA;MAClB,WAAA,GAAc;AACd,WAAA,gBAAA;;QACE,IAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAA,KAAqB,CAAxB;UACE,IAAA,CAAoB,eAAgB,CAAA,GAAA,CAApC;AAAA,mBAAO,MAAP;;UACA,IAAG,WAAY,CAAA,IAAI,CAAC,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAA,CAAZ,KAAwC,MAA3C;AACE,kBAAU,IAAA,KAAA,CAAM,QAAA,GAAS,IAAC,CAAA,IAAV,GAAe,6BAAf,GAA4C,IAA5C,GAAiD,GAAvD,EADZ;;UAEA,WAAY,CAAA,IAAI,CAAC,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAA,CAAZ,GAAqC,eAAgB,CAAA,GAAA,EAJvD;SAAA,MAAA;UAME,IAAgB,IAAA,KAAU,eAAgB,CAAA,GAAA,CAA1C;AAAA,mBAAO,MAAP;WANF;;AADF;aAQA;IAjBS;;;;;AA5Fb;;;ACAA;EAAA,OAAO,CAAC,UAAR,GAAqB,SAAC,MAAD;WACnB,MAAM,CAAC,GAAP,CAAW,SAAC,GAAD;aAAS;IAAT,CAAX;EADmB;;EAGrB,OAAO,CAAC,YAAR,GAAuB,SAAC,IAAD,EAAO,IAAP;AACrB,QAAA;IAAA,MAAA,GAAS;AACT,SAAA,WAAA;;MAAA,MAAO,CAAA,GAAA,CAAP,GAAc;AAAd;AACA,SAAA,WAAA;;MAAA,MAAO,CAAA,GAAA,CAAP,GAAc;AAAd;WACA;EAJqB;AAHvB;;;ACAA;EAAM,OAAO,CAAC;IACC,eAAC,GAAD,EAAO,IAAP;MAAC,IAAC,CAAA,MAAD;MAAM,IAAC,CAAA,sBAAD,OAAQ;QAAE,MAAA,EAAQ,SAAV;;MAC1B,IAAC,CAAA,MAAD,GAAU,IAAC,CAAA,IAAI,CAAC;MAChB,IAAC,CAAA,KAAD,GAAS;MACT,IAAC,CAAA,YAAD,GAAgB,CAAC,IAAC,CAAA,KAAF;MAChB,IAAC,CAAA,MAAD,GAAU;MACV,IAAC,CAAA,aAAD,GAAiB;IALN;;oBAOb,QAAA,GAAU,SAAC,KAAD;MAAC,IAAC,CAAA,QAAD;aACT,IAAC,CAAA,YAAY,CAAC,IAAd,CAAmB,IAAC,CAAA,KAApB;IADQ;;oBAGV,OAAA,GAAS,SAAA;AACP,UAAA;MAAA,IAAC,CAAA,QAAD,CAAU,UAAV;kDACe,CAAE,aAAjB,CAA+B,IAA/B;IAFO;;oBAIT,OAAA,GAAS,SAAA;MACP,IAAC,CAAA,QAAD,CAAU,UAAV;MACA,IAAC,CAAA,WAAD,CAAa,SAAb;aACA,OAAO,CAAC,MAAM,CAAC,OAAf,CAAuB,IAAvB;IAHO;;oBAKT,kBAAA,GAAoB,SAAA;aAClB,OAAO,CAAC,QAAQ,CAAC,MAAjB,CAAwB,IAAC,CAAA,GAAG,CAAC,QAAL,CAAA,CAAxB;IADkB;;oBAGpB,KAAA,GAAO,SAAA;AACL,UAAA;MAAA,IAAC,CAAA,QAAD,CAAU,SAAV;MACA,IAAC,CAAA,WAAD,CAAa,OAAb;MACA,OAAO,CAAC,MAAM,CAAC,WAAf,CAA2B,IAA3B;kDACe,CAAE,mBAAjB,CAAqC,IAArC;IAJK;;oBAMP,wBAAA,GAA0B,SAAA;MACxB,IAAmB,IAAC,CAAA,MAAD,KAAa,SAAhC;eAAA,IAAC,CAAA,YAAD,CAAA,EAAA;;IADwB;;oBAG1B,YAAA,GAAc,SAAA;AACZ,UAAA;kDAAe,CAAE,IAAjB,CAAsB,IAAC,CAAA,GAAvB;IADY;;oBAGd,MAAA,GAAQ,SAAA;AACN,UAAA;;WAAgB,CAAE,MAAlB,CAAyB,IAAC,CAAA,eAA1B;;aACA,IAAC,CAAA,MAAD,CAAA;IAFM;;oBAIR,MAAA,GAAQ,SAAA;AACN,UAAA;kDAAe,CAAE,oBAAjB,CAAsC,IAAtC;IADM;;oBAGR,QAAA,GAAU,SAAC,KAAD;AACR,UAAA;kDAAe,CAAE,sBAAjB,CAAwC,KAAxC;IADQ;;oBAGV,WAAA,GAAa,SAAA;aACX,IAAC,CAAA,OAAD,GAAW,OAAO,CAAC,OAAO,CAAC,GAAhB,CAAoB,IAAC,CAAA,GAArB,EACT;QAAA,OAAA,EAAS,IAAC,CAAA,gBAAgB,CAAC,IAAlB,CAAuB,IAAvB,CAAT;QACA,KAAA,EAAO,IAAC,CAAA,cAAc,CAAC,IAAhB,CAAqB,IAArB,CADP;QAEA,OAAA,EAAS,IAAC,CAAA,gBAAgB,CAAC,IAAlB,CAAuB,IAAvB,CAFT;QAGA,aAAA,EAAe,IAAC,CAAA,aAHhB;OADS;IADA;;oBAOb,gBAAA,GAAkB,SAAC,eAAD,EAAmB,aAAnB,EAAmC,GAAnC;AAChB,UAAA;MADiB,IAAC,CAAA,kBAAD;MAAkB,IAAC,CAAA,gBAAD;kDACpB,CAAE,qBAAjB,CAAuC,IAAvC;IADgB;;oBAGlB,cAAA,GAAgB,SAAC,eAAD,EAAmB,aAAnB,EAAmC,GAAnC;AACd,UAAA;MADe,IAAC,CAAA,kBAAD;MAAkB,IAAC,CAAA,gBAAD;kDAClB,CAAE,gCAAjB,CAAkD,IAAlD;IADc;;oBAGhB,gBAAA,GAAkB,SAAA;AAChB,UAAA;kDAAe,CAAE,mBAAjB,CAAqC,IAArC;IADgB;;oBAGlB,aAAA,GAAe,SAAA;MACb,IAA4B,IAAC,CAAA,IAAI,CAAC,MAAN,KAAgB,SAA5C;AAAA,eAAO,IAAC,CAAA,cAAD,CAAA,EAAP;;MACA,IAA4B,IAAC,CAAA,IAAI,CAAC,MAAN,KAAgB,SAA5C;AAAA,eAAO,IAAC,CAAA,cAAD,CAAA,EAAP;;IAFa;;oBAIf,cAAA,GAAgB,SAAA;aACd,OAAO,CAAC,SAAR,CAAkB;QAAE,OAAA,EAAS,IAAX;OAAlB,EAAqC,IAArC,EAA2C,IAAC,CAAA,GAA5C;IADc;;oBAGhB,cAAA,GAAgB,SAAA;aACd,OAAO,CAAC,YAAR,CAAqB;QAAE,OAAA,EAAS,IAAX;OAArB,EAAwC,IAAxC,EAA8C,IAAC,CAAA,GAA/C;IADc;;oBAGhB,WAAA,GAAa,SAAC,IAAD;aACX,IAAC,CAAA,MAAO,CAAA,IAAA,CAAR,GAAoB,IAAA,IAAA,CAAA,CAAM,CAAC,OAAP,CAAA;IADT;;;;;AAvEf;;;ACAA;EAAM,OAAO,CAAC;IACC,iBAAA;MACX,IAAC,CAAA,QAAD,GAAY;IADD;;sBAGb,KAAA,GAAO,SAAC,IAAD,EAAO,QAAP;AACL,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;aACV,IAAC,CAAA,QAAQ,CAAC,IAAV,CACE;QAAA,GAAA,EAAK,GAAL;QACA,QAAA,EAAU,QADV;OADF;IAFK;;sBAMP,aAAA,GAAe,SAAC,QAAD,EAAW,QAAX;aACb,QAAQ,CAAC,GAAG,CAAC,IAAb,KAAqB,QAAQ,CAAC,GAAG,CAAC,IAAlC,IAA2C,QAAQ,CAAC,GAAG,CAAC,IAAb,KAAqB,QAAQ,CAAC,GAAG,CAAC;IADhE;;sBAGf,IAAA,GAAM,SAAC,IAAD;AACJ,UAAA;MAAA,GAAA,GAAU,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;MACV,UAAA,GAAa;aACb,IAAC,CAAA,QAAQ,CAAC,MAAV,CAAiB,CAAA,SAAA,KAAA;eAAA,SAAC,OAAD;UACf,IAA8C,UAA9C;AAAA,mBAAO,KAAC,CAAA,aAAD,CAAe,UAAf,EAA2B,OAA3B,EAAP;;UACA,IAAG,OAAO,CAAC,GAAG,CAAC,KAAZ,CAAkB,GAAlB,CAAH;YACE,UAAA,GAAa;AACb,mBAAO,KAFT;;QAFe;MAAA,CAAA,CAAA,CAAA,IAAA,CAAjB;IAHI;;sBASN,IAAA,GAAM,SAAC,IAAD;AACJ,UAAA;AAAA;AAAA;WAAA,qCAAA;;qBACE,OAAO,CAAC,QAAR,CAAiB,OAAO,CAAC,GAAG,CAAC,KAAZ,CAAsB,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,CAAtB,CAAjB;AADF;;IADI;;;;;AAtBR;;;ACAA;EAAM,OAAO,CAAC,OAAO,CAAC;IACP,iBAAA;MACX,IAAC,CAAA,WAAD,GAAmB,IAAA,OAAO,CAAC,WAAR,CAAA;IADR;;sBAGb,aAAA,GAAe,SAAC,KAAD;aACb,KAAK,CAAC,KAAN,CAAA;IADa;;sBAGf,mBAAA,GAAqB,SAAC,KAAD;MACnB,KAAK,CAAC,aAAN,CAAA;MACA,IAAG,KAAK,CAAC,MAAN,KAAgB,SAAnB;QACE,KAAK,CAAC,OAAN,CAAA,EADF;OAAA,MAAA;QAGE,KAAK,CAAC,kBAAN,CAAA,EAHF;;MAIA,IAAC,CAAA,WAAW,CAAC,QAAb,CAAsB,CAAtB;aACA,IAAC,CAAA,WAAW,CAAC,IAAb,CAAA;IAPmB;;sBASrB,sBAAA,GAAwB,SAAC,KAAD;aACtB,IAAC,CAAA,WAAW,CAAC,QAAb,CAAsB,KAAtB;IADsB;;sBAGxB,qBAAA,GAAuB,SAAC,KAAD;aACrB,KAAK,CAAC,MAAN,CAAA;IADqB;;sBAGvB,oBAAA,GAAsB,SAAC,KAAD;MACpB,IAAC,CAAA,WAAW,CAAC,QAAb,CAAsB,GAAtB;MACA,UAAA,CAAW,CAAA,SAAA,KAAA;eAAA,SAAA;iBACT,KAAC,CAAA,WAAW,CAAC,IAAb,CAAA;QADS;MAAA,CAAA,CAAA,CAAA,IAAA,CAAX,EAEE,EAFF;aAGA,KAAK,CAAC,wBAAN,CAAA;IALoB;;sBAOtB,gCAAA,GAAkC,SAAC,KAAD;aAChC,OAAO,CAAC,GAAR,CAAY,cAAZ;IADgC;;sBAGlC,mBAAA,GAAqB,SAAC,KAAD;aACnB,OAAO,CAAC,GAAR,CAAY,iBAAZ;IADmB;;;;;AAhCvB;;;ACAA;;AAAA;;;ACAA;;AAAA;;;ACAA;EAAM,OAAO,CAAC,QAAQ,CAAC;IACR,cAAC,KAAD;MAAC,IAAC,CAAA,OAAD;IAAD;;mBAEb,aAAA,GAAe,SAAA;AACb,UAAA;MAAA,OAAA,GAAU,IAAC,CAAA,iBAAD,CAAA;MACV,IAAa,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAoB,CAAC,MAArB,KAA+B,CAA5C;AAAA,eAAO,GAAP;;aACA,OAAO,CAAC,GAAR,CAAY,CAAA,SAAA,KAAA;eAAA,SAAC,IAAD;iBAAU,KAAC,CAAA,kBAAD,CAAoB,IAApB;QAAV;MAAA,CAAA,CAAA,CAAA,IAAA,CAAZ,CACA,CAAC,MADD,CACQ,SAAC,GAAD,EAAM,GAAN;eAAc,GAAG,CAAC,MAAJ,CAAW,GAAX;MAAd,CADR,CAEA,CAAC,MAFD,CAEQ,SAAC,KAAD,EAAQ,IAAR;eACN,KAAA,IAAY,IAAD,GAAM;MADX,CAFR,EAIE,EAJF,CAKA,CAAC,OALD,CAKS,KALT,EAKgB,EALhB;IAHa;;mBAUf,iBAAA,GAAmB,SAAC,MAAD,EAAc,IAAd,EAAyB,IAAzB;AACjB,UAAA;;QADkB,SAAS;;;QAAI,OAAO;;;QAAI,OAAO,IAAC,CAAA;;AAClD,WAAA,WAAA;;QACE,OAAA,GAAU,OAAO,CAAC,UAAR,CAAmB,IAAnB;QACV,OAAO,CAAC,IAAR,CAAa,GAAb;QACA,IAAG,OAAO,KAAP,KAAgB,QAAhB,IAA6B,CAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAApC;UACE,IAAC,CAAA,iBAAD,CAAmB,MAAnB,EAA2B,OAA3B,EAAoC,KAApC,EADF;SAAA,MAAA;UAGE,MAAM,CAAC,IAAP,CAAY;YAAC,GAAA,EAAK,OAAN;YAAe,KAAA,EAAO,KAAtB;WAAZ,EAHF;;AAHF;aAOA;IARiB;;mBAUnB,kBAAA,GAAoB,SAAC,GAAD;AAClB,UAAA;MADqB,UAAA,KAAK,YAAA;MAC1B,IAAG,KAAK,CAAC,OAAN,CAAc,KAAd,CAAA,IAAyB,KAAK,CAAC,MAAN,GAAe,CAA3C;eACE,KAAK,CAAC,GAAN,CAAU,CAAA,SAAA,KAAA;iBAAA,SAAC,WAAD;mBACR,KAAC,CAAA,wBAAD,CAA0B;cAAE,KAAA,GAAF;cAAO,KAAA,EAAO,CAAC,WAAD,CAAd;aAA1B;UADQ;QAAA,CAAA,CAAA,CAAA,IAAA,CAAV,CAEC,CAAC,MAFF,CAES,SAAC,GAAD,EAAM,GAAN;iBAAc,GAAG,CAAC,MAAJ,CAAW,GAAX;QAAd,CAFT,EADF;OAAA,MAAA;eAKE,IAAC,CAAA,wBAAD,CAA0B;UAAE,KAAA,GAAF;UAAO,OAAA,KAAP;SAA1B,EALF;;IADkB;;mBAQpB,wBAAA,GAA0B,SAAC,GAAD;AACxB,UAAA;MAD2B,UAAA,KAAK,YAAA;MAChC,IAAG,KAAK,CAAC,OAAN,CAAc,KAAd,CAAH;QACE,MAAA,GAAS;QACT,KAAA,GAAQ,KAAM,CAAA,CAAA,EAFhB;OAAA,MAAA;QAIE,MAAA,GAAS,GAJX;;MAKA,KAAA,GAAQ,SAAA,CAAU,KAAV;MACR,IAAG,GAAG,CAAC,MAAJ,KAAc,CAAjB;eACE,CAAC,EAAA,GAAG,GAAI,CAAA,CAAA,CAAP,GAAY,MAAZ,GAAmB,GAAnB,GAAsB,KAAvB,EADF;OAAA,MAAA;QAGE,SAAA,GAAY,GAAI,CAAA,CAAA;AAChB;AAAA,aAAA,qCAAA;;UAAA,SAAA,IAAa,GAAA,GAAI,IAAJ,GAAS;AAAtB;eACA,CAAC,EAAA,GAAG,SAAH,GAAe,MAAf,GAAsB,GAAtB,GAAyB,KAA1B,EALF;;IAPwB;;;;;AA/B5B;;;ACAA;EAAM,OAAO,CAAC,QAAQ,CAAC;IACR,qBAAC,KAAD;MACX,IAAC,CAAA,KAAD,GAAS,KAAK,CAAC,OAAN,CAAc,GAAd,EAAmB,EAAnB;IADE;;0BAGb,MAAA,GAAQ,SAAA;aACN,IAAC,CAAA,iBAAD,CAAmB,IAAC,CAAA,eAAD,CAAA,CAAnB;IADM;;0BAGR,OAAA,GAAS,SAAA;AACP,UAAA;MAAA,OAAA,GAAU,IAAC,CAAA,eAAD,CAAA;AACV,aAAO,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAoB,CAAC,MAArB,GAA8B;IAF9B;;0BAIT,iBAAA,GAAmB,SAAC,OAAD;AACjB,UAAA;MAAA,MAAA,GAAS;AACT;AAAA,WAAA,qCAAA;;QACE,UAAA,GAAa,IAAC,CAAA,cAAD,CAAgB,GAAhB;QACb,IAAC,CAAA,iBAAD,CAAmB,MAAnB,EAA2B,UAA3B,EAAuC,OAAQ,CAAA,GAAA,CAA/C;AAFF;aAGA;IALiB;;0BAOnB,cAAA,GAAgB,SAAC,GAAD;AACd,UAAA;MAAA,SAAA,GAAY;MACZ,IAAA,CAAoB,GAAG,CAAC,KAAJ,CAAU,SAAV,CAApB;AAAA,eAAO,CAAC,GAAD,EAAP;;aACA,GAAG,CAAC,KAAJ,CAAU,GAAV,CACE,CAAC,GADH,CACO,SAAC,IAAD;eAAU,IAAI,CAAC,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAqB,CAAC,IAAtB,CAAA;MAAV,CADP,CAEE,CAAC,MAFH,CAEU,SAAC,IAAD;eAAU,IAAI,CAAC,IAAL,CAAA,CAAA,KAAiB;MAA3B,CAFV;IAHc;;0BAOhB,iBAAA,GAAmB,SAAC,GAAD,EAAM,IAAN,EAAY,KAAZ;AACjB,UAAA;MAAA,WAAA,GAAc;AACd,WAAA,sDAAA;;QACE,IAAA,CAAsB,GAAI,CAAA,IAAA,CAA1B;UAAA,GAAI,CAAA,IAAA,CAAJ,GAAY,GAAZ;;QACA,IAAG,KAAA,KAAS,IAAI,CAAC,MAAL,GAAc,CAA1B;UACE,GAAI,CAAA,IAAA,CAAJ,GAAY,MADd;SAAA,MAAA;UAGE,GAAA,GAAM,GAAI,CAAA,IAAA,EAHZ;;AAFF;aAMA;IARiB;;0BAUnB,eAAA,GAAiB,SAAA;AACf,UAAA;MAAA,UAAA,GAAa,IAAC,CAAA,KAAK,CAAC,KAAP,CAAa,GAAb;MACb,KAAA,GAAQ;AACR,WAAA,4CAAA;;QACE,IAAC,CAAA,iBAAD,CAAmB,KAAnB,EAA0B,IAAC,CAAA,aAAD,CAAe,SAAf,CAA1B;AADF;aAEA;IALe;;0BAOjB,iBAAA,GAAmB,SAAC,KAAD,EAAQ,GAAR;AACjB,UAAA;0BADyB,MAAiB,IAAf,UAAA,KAAK,YAAA;MAChC,IAAA,CAAA,CAAoB,GAAA,IAAQ,KAA5B,CAAA;AAAA,eAAO,MAAP;;MACA,IAAG,KAAM,CAAA,GAAA,CAAN,IAAe,KAAK,CAAC,OAAN,CAAc,KAAM,CAAA,GAAA,CAApB,CAAlB;eACE,KAAM,CAAA,GAAA,CAAI,CAAC,IAAX,CAAgB,KAAhB,EADF;OAAA,MAEK,IAAG,KAAM,CAAA,GAAA,CAAT;eACH,KAAM,CAAA,GAAA,CAAN,GAAa,CAAC,KAAM,CAAA,GAAA,CAAP,EAAa,KAAb,EADV;OAAA,MAAA;eAGH,KAAM,CAAA,GAAA,CAAN,GAAgB,OAAO,CAAC,IAAR,CAAa,GAAb,CAAH,GAA0B,CAAC,KAAD,CAA1B,GAAuC,MAHjD;;IAJY;;0BASnB,aAAA,GAAe,SAAC,SAAD;AACb,UAAA;MAAA,MAAA,GAAS,SAAS,CAAC,KAAV,CAAgB,GAAhB;MACT,IAAU,MAAM,CAAC,MAAP,KAAiB,CAA3B;AAAA,eAAA;;aACA;QAAE,GAAA,EAAK,MAAO,CAAA,CAAA,CAAd;QAAkB,KAAA,EAAO,kBAAA,CAAmB,MAAO,CAAA,CAAA,CAA1B,CAAzB;;IAHa;;;;;AAnDjB","file":"locflow.js","sourcesContent":["@Locflow =\n  version: '2.0.0'\n\n  supported: do ->\n    window.history.pushState? and window.requestAnimationFrame?\n\n  back: ->\n    history.back()\n\n  forward: ->\n    history.forward()\n\n  visit: (path, opts) ->\n    visit = new Locflow.Visit(path, opts)\n    visit.propose()\n    visit\n\n  submit: (target) ->\n    form = new Locflow.Form(target)\n    form.submit()\n\n  match: (path, callback) ->\n    @handler ||= new Locflow.Handler()\n    @handler.match(path, callback)\n\n  route: (path, callbacks) ->\n    @router ||= new Locflow.Router()\n    @router.register(path, callbacks)\n\n  initialize: (sendInitialRequest = true) ->\n    @adapter = new Locflow.Adapter.Browser()\n    @renderer = new Locflow.Renderer()\n    @router ||= new Locflow.Router()\n    @handler ||= new Locflow.Handler()\n    @interceptor = new Locflow.Interceptor()\n    @interceptor.intercept(document.body.parentNode)\n    if sendInitialRequest\n      visit = new Locflow.Visit(new Locflow.Url(document.location))\n      @router.invokeCustomRoute(visit)\n      visit.callHandlers()\n\n  useAuthenticityTokenFromMeta: (metaName, attrName) ->\n    @csrf = new Locflow.Csrf(metaName, attrName)\n\nLocflow.Encoding = {}\nLocflow.Adapter = {}\n\nif Locflow.supported\n  window.addEventListener 'popstate', (ev) ->\n    url = new Locflow.Url(document.location)\n    visit = new Locflow.Visit(url, action: 'restore')\n    visit.propose()\n  window.addEventListener('load', -> Locflow.initialize(true))\n","# The Cache class is a general purpose key-value store. The underlying\n# implementation relies on plain old javascript objects, with a few utilities\n# such as:\n#\n# * Optional default value for key (useful for default parameters)\n# * Limit the cache size with the latest N items.\n# * Expire value after N seconds.\nclass Locflow.Cache\n  constructor: ->\n    @data = {}\n    @limit = 9999\n\n  # Limits how many elements the cache should keep. If it goes over the limit,\n  # older records are removed in order to create space for new ones.\n  setSize: (@limit) ->\n    @removeExceedingRecords()\n\n  sortedKeysByTime: ->\n    sorted = []\n    for key of @data\n      sorted.push([key, @data[key].timestamp])\n    sorted.sort((a,b) -> a[1] - b[1]).map((rec) -> rec[0])\n\n  removeExceedingRecords: ->\n    pending = Object.keys(@data).length - @limit\n    sortedKeys = @sortedKeysByTime()\n    while pending > 0\n      key = sortedKeys.shift()\n      @remove(key)\n      pending -= 1\n\n  put: (key, value) ->\n    @data[key] =\n      value: value\n      timestamp: new Date().getTime()\n    @removeExceedingRecords()\n\n  get: (key, defaultValue) ->\n    value = @data[key]?.value\n    if value is undefined then defaultValue else value\n\n  has: (key) ->\n    @get(key) isnt undefined\n\n  remove: (key) ->\n    val = @get(key)\n    delete @data[key]\n    val\n\n  removeAll: ->\n    @remove(key) for key of @data\n","class Locflow.Csrf\n  constructor: (@metaName, @attrName = @metaName) ->\n\n  getFromMeta: ->\n    meta = document.querySelector('meta[name=\"'+@metaName+'\"]')\n    return meta.content if meta\n\n  appendToken: (obj) ->\n    value = @getFromMeta()\n    if value and obj\n      obj[@attrName] = value\n","class Locflow.Dispatcher\n  constructor: (@prefix = 'locflow:') ->\n\n  dispatchOn: (targets, eventName, data) ->\n    for target in targets\n      @dispatch(eventName, {target: target, data: data})\n\n  dispatch: (eventName, {target, data} = {}) ->\n    ev = document.createEvent('Events')\n    ev.initEvent(@normalizeName(eventName), true, true)\n    ev.data = data ? {}\n    (target ? document).dispatchEvent(ev)\n    ev\n\n  normalizeName: (name) ->\n    \"#{@prefix}#{name}\"\n\nLocflow.dispatcher = new Locflow.Dispatcher() \n","class Locflow.Interceptor\n  intercept: (elm) ->\n    elm.addEventListener('click', @onClick.bind(@))\n    elm.addEventListener('submit', @onSubmit.bind(@))\n\n  shouldIgnore: (elm) ->\n    return false if @getElementAction(elm) is 'accept'\n    return true if @getElementAction(elm) is 'ignore'\n    return true if @getParentAction(elm) is 'ignore'\n    false\n\n  getElementAction: (elm) ->\n    dataLocflow = elm and elm.getAttribute and elm.getAttribute('data-locflow')\n    return 'ignore' if dataLocflow is 'false'\n    return 'accept' if dataLocflow is 'true'\n    'default'\n\n  getParentAction: (elm) ->\n    parent = elm.parentNode\n    while parent\n      action = @getElementAction parent\n      return action if action isnt 'default'\n      parent = parent.parentNode\n    'default'\n\n  hasParentAnchor: (elm) ->\n    @getParentAnchor(elm) isnt null\n\n  getParentAnchor: (elm) ->\n    while elm.parentNode\n      return elm.parentNode if elm.parentNode.tagName is 'A'\n      elm = elm.parentNode\n    null\n\n  onClick: (ev) ->\n    target = ev.target\n    if target.tagName is 'A' and target.href and not @shouldIgnore(target)\n      ev.preventDefault()\n      @proposeVisitFromAnchor(target)\n    else if @hasParentAnchor(target) and not @shouldIgnore(@getParentAnchor(target))\n      ev.preventDefault()\n      @proposeVisitFromAnchor(@getParentAnchor(target))\n\n  proposeVisitFromAnchor: (anchor) ->\n    method = anchor.getAttribute('data-method') or 'GET'\n    if method.toUpperCase() isnt 'GET'\n      request = new Locflow.Request(method, anchor.href)\n      request.send()\n    else\n      @visit = new Locflow.Visit(anchor.href)\n      @visit.propose()\n\n  onSubmit: (ev) ->\n    targetForm = ev.target\n    if targetForm.getAttribute('data-locflow') is 'remote' and not @shouldIgnore(targetForm)\n      ev.preventDefault()\n      form = new Locflow.Form(targetForm)\n      form.submit()\n\n","singleValueTypes = [\n  'text', 'password', 'submit', 'textarea', 'email', 'hidden', 'color', 'number'\n]\n\nclass Locflow.Form\n  constructor: (@form) ->\n    @serialized = {}\n\n  serialize: ->\n    for element in @form.elements\n      @serializeInput(element)\n    @serialized\n\n  submit: ->\n    ev = Locflow.dispatcher.dispatch('submit', data: { form: @form })\n    return if ev.defaultPrevented\n    method = @form.getAttribute('data-method') or @form.method\n    @submitRequest = new Locflow.Request(method, @form.action,\n      headers:\n        'Accept': 'application/json, text/javascript'\n    )\n    @submitRequest.success(@onSubmitSuccess.bind(this))\n    @submitRequest.error(@onSubmitError.bind(this))\n    @submitRequest.send(@serialize())\n\n  onSubmitSuccess: (response, status, xhr) ->\n    Locflow.dispatcher.dispatchOn([document, @form], 'submit-success',\n      data:\n        form: @form\n        response: response\n        status: status\n    )\n\n  onSubmitError: (response, status, xhr) ->\n    Locflow.dispatcher.dispatchOn([document, @form], 'submit-error',\n      data:\n        form: @form\n        response: response\n        status: status\n    )\n\n  serializeInput: (elm) ->\n    if singleValueTypes.indexOf(elm.type) isnt -1\n      @serializeSingleValue(elm)\n    if 'select-one' is elm.type\n      @serializeSelectOne(elm)\n    if 'checkbox' is elm.type\n      @serializeCheckbox(elm)\n    if 'radio' is elm.type\n      @serializeRadio(elm)\n    if 'select-multiple' is elm.type\n      @serializeSelectMultiple(elm)\n\n  serializeSingleValue: (elm) ->\n    @serialized[elm.name] = elm.value\n\n  serializeSelectOne: (elm) ->\n    selected = elm.options[elm.selectedIndex]?.value\n    @serialized[elm.name] = selected if selected.trim() isnt ''\n\n  serializeCheckbox: (elm) ->\n    checkboxes = document.getElementsByName(elm.name)\n    if checkboxes.length is 1 and elm.checked\n      @serialized[elm.name] = 'on'\n    else if checkboxes.length > 1\n      values = []\n      for checkbox in checkboxes\n        values.push(checkbox.value) if checkbox.checked\n      @serialized[elm.name] = values\n\n  serializeRadio: (elm) ->\n    radios = document.getElementsByName(elm.name)\n    for radio in radios\n      @serialized[elm.name] = radio.value if radio.checked\n\n  serializeSelectMultiple: (elm) ->\n    options = elm.options\n    selected = []\n    for option in options\n      selected.push(option.value) if option.selected\n    @serialized[elm.name] = selected if selected.length > 0\n\n","class Locflow.Request\n  constructor: (@method, @url, @opts = {}) ->\n    @timeoutMillis = @opts.timeoutMillis or 4000\n    @xhr = null\n    @aborted = false\n\n  @GET: (url, opts) ->\n    req = new Locflow.Request('GET', url, opts)\n    req.send()\n    req\n\n  @POST: (url, data, opts) ->\n    req = new Locflow.Request 'POST', url, opts\n    req.send(data)\n    req\n\n  @PUT: (url, data, opts) ->\n    req = new Locflow.Request 'PUT', url, opts\n    req.send(data)\n    req\n\n  @DELETE: (url, data, opts) ->\n    req = new Locflow.Request 'DELETE', url, opts\n    req.send(data)\n    req\n\n  success: (callback) ->\n    @opts.success = callback\n\n  error: (callback) ->\n    @opts.error = callback\n\n  timeout: (callback) ->\n    @opts.timeout = callback\n\n  abort: ->\n    @aborted = true\n    @xhr?.abort()\n\n  parseResponse: ->\n    return @parsedResponse if @parsedResponse\n    contentType = @xhr?.getResponseHeader('Content-Type')\n    if contentType and contentType.indexOf('application/json') is 0\n      @parsedResponse = JSON.parse(@xhr.responseText)\n    else if contentType and contentType.indexOf('text/javascript') is 0\n      @parsedResponse = @xhr.responseText\n      try eval(@xhr.responseText)\n      catch e then Locflow.handleInvalidJavascriptResponse?(@xhr.responseText)\n    else\n      @parsedResponse = @xhr.responseText\n    @parsedResponse\n\n  setAcceptHeader: ->\n    format = new Locflow.Url(@url).format()\n    if format is 'html'\n      @xhr.setRequestHeader 'Accept', 'text/html, application/xhtml+xml, application/xml'\n    else if format is 'json'\n      @xhr.setRequestHeader 'Accept', 'application/json; charset=utf-8'\n    else if format is 'js'\n      @xhr.setRequestHeader 'Accept', 'text/javascript; charset=utf-8'\n\n  setDefaultHeaders: ->\n    @xhr.setRequestHeader 'X-Locflow', 'true'\n    @xhr.setRequestHeader 'Content-Type', 'application/x-www-form-urlencoded'\n    if Locflow.csrf?.getFromMeta()\n      @xhr.setRequestHeader 'X-CSRF-Token', Locflow.csrf.getFromMeta()\n    unless @opts.headers?['Accept']\n      @setAcceptHeader()\n\n  trigger: (action) ->\n    @parseResponse()\n    if @xhr and @xhr.readyState > 0\n      @opts[action]?(@parseResponse(), @xhr.status, @xhr)\n\n  send: (body = {}) ->\n    @xhr = new XMLHttpRequest()\n    @xhr.open(@method, @url, true)\n    @setDefaultHeaders()\n    for key, value of @opts.headers\n      @xhr.setRequestHeader(key, value)\n    @xhr.withCredentials = @opts.withCredentials\n    @xhrTimeout = setTimeout(=>\n      return if @aborted\n      @trigger('timeout')\n    , @timeoutMillis)\n    @xhr.onerror = => @trigger('error')\n    @xhr.onreadystatechange = =>\n      return if @aborted\n      if @xhr.readyState is 4\n        clearTimeout(@xhrTimeout)\n        if @xhr.status is 200\n          @trigger('success')\n        else\n          @trigger('error')\n    sendData = @formatBody(body)\n    @xhr.send(sendData)\n\n  formatBody: (body) ->\n    return '' if @method is 'GET'\n    if body and Locflow.csrf\n      Locflow.csrf.appendToken(body)\n    encoded = new Locflow.Encoding.Json(body).toQueryString()\n    encoded\n","class Locflow.Navigation\n  onVisit: (visit, cache) ->\n    if visit.action isnt 'restore'\n      visit.sendRequest()\n\n  onLeave: (visit, cache) ->\n    Locflow.snapshot.stage(visit.url.toString(), document.title)\n\n  restore: (visit, cache) ->\n    if Locflow.snapshot.cache.has(visit.url.toString())\n      Locflow.snapshot.render(visit.url.toString())\n    else\n      visit.sendRequest()\n","class Locflow.ProgressBar\n  ANIMATION_DURATION = 300\n\n  @defaultCSS: \"\"\"\n    .locflow-progress-bar {\n      position: fixed;\n      display: block;\n      top: 0;\n      left: 0;\n      height: 3px;\n      background: #0076ff;\n      z-index: 9999;\n      transition: width #{ANIMATION_DURATION}ms ease-out, opacity #{ANIMATION_DURATION / 2}ms #{ANIMATION_DURATION / 2}ms ease-in;\n      transform: translate3d(0, 0, 0);\n    }\n  \"\"\"\n\n  constructor: ->\n    @stylesheetElement = @createStylesheetElement()\n    @progressElement = @createProgressElement()\n\n  show: ->\n    unless @visible\n      @visible = true\n      @installStylesheetElement()\n      @installProgressElement()\n      @startTrickling()\n\n  hide: ->\n    if @visible and not @hiding\n      @hiding = true\n      @fadeProgressElement =>\n        @uninstallProgressElement()\n        @stopTrickling()\n        @visible = false\n        @hiding = false\n\n  setValue: (@value) ->\n    @refresh()\n\n  installStylesheetElement: ->\n    document.head.insertBefore(@stylesheetElement, document.head.firstChild)\n\n  installProgressElement: ->\n    @progressElement.style.width = 0\n    @progressElement.style.opacity = 1\n    document.documentElement.insertBefore(@progressElement, document.body)\n    @refresh()\n\n  fadeProgressElement: (callback) ->\n    @progressElement.style.opacity = 0\n    setTimeout(callback, ANIMATION_DURATION * 1.5)\n\n  uninstallProgressElement: ->\n    if @progressElement.parentNode\n      document.documentElement.removeChild(@progressElement)\n\n  startTrickling: ->\n    @trickleInterval ?= setInterval(@trickle, ANIMATION_DURATION)\n\n  stopTrickling: ->\n    clearInterval(@trickleInterval)\n    @trickleInterval = null\n\n  trickle: =>\n    @setValue(@value + Math.random() / 100)\n\n  refresh: ->\n    requestAnimationFrame =>\n      @progressElement.style.width = \"#{10 + (@value * 90)}%\"\n\n  createStylesheetElement: ->\n    element = document.createElement(\"style\")\n    element.type = \"text/css\"\n    element.textContent = @constructor.defaultCSS\n    element\n\n  createProgressElement: ->\n    element = document.createElement(\"div\")\n    element.className = \"locflow-progress-bar\"\n    element\n","routes = []\n\nclass Locflow.Router\n  constructor: ->\n    @routes = []\n    @defaultNavigation = new Locflow.Navigation()\n    @defaultNavigation.cache = Locflow.navigationCache\n\n  removeAll: ->\n    @routes = []\n\n  register: (path, callbacks) ->\n    route =\n      cache: new Locflow.Cache()\n      url: new Locflow.Url(path)\n      restore: callbacks.restore\n      onVisit: callbacks.onVisit\n      onLeave: callbacks.onLeave\n    @routes.push route\n    route\n\n  findMatch: (path) ->\n    for route in @routes\n      return route if route.url.match(new Locflow.Url(path))\n    @defaultNavigation\n\n  invokeCustomRoute: (visit) ->\n    route = @findMatch visit.url\n    if route instanceof Locflow.Navigation\n      @currentRoute = route\n      @latestVisit = visit\n    else\n      @callRouteVisitActions visit, route\n\n  invokeVisit: (visit) ->\n    route = @findMatch visit.url\n    @callRouteVisitActions visit, route\n\n  callRouteVisitActions: (visit, route) ->\n    @currentRoute?.onLeave(@latestVisit, @currentRoute.cache)\n    @currentRoute = route\n    @latestVisit = visit\n    if visit.action isnt 'restore'\n      route?.onVisit(visit, route.cache)\n\n  restore: (visit) ->\n    route = @findMatch visit.url\n    route?.restore?(visit, route.cache)\n    if visit.action is 'restore'\n      setTimeout(-> visit.finish())\n","class Locflow.Renderer\n  constructor: ->\n    @cache = new Locflow.Cache()\n\n  cloneBody: ->\n    document.body.cloneNode(true)\n\n  findPermanentElements: ->\n    permanentElements = document.querySelectorAll(\n      '*[data-locflow=\"permanent\"]:not([data-shallow])'\n    )\n    for elm in permanentElements\n      if !elm.id\n        throw new Error('permanent element must have an id')\n    permanentElements\n\n  removePermanentElements: ->\n    permanentElements = @findPermanentElements()\n    for elm in permanentElements\n      shallowClone = elm.cloneNode(false)\n      shallowClone.setAttribute 'data-shallow', 'true'\n      elm.parentNode.replaceChild(shallowClone, elm)\n    permanentElements\n\n  removeAndCachePermanentElements: ->\n    permanents = @removePermanentElements()\n    currentPermanents = @cache.get('elements') or []\n    mergedPermanents = Array.prototype.slice.call(currentPermanents)\n    for permanent in permanents\n      found = false\n      for currentPermanent in currentPermanents\n        if permanent.id is currentPermanent.id\n          found = true\n          break\n      if not found\n        mergedPermanents.push permanent\n    @cache.put('elements', mergedPermanents)\n    mergedPermanents\n\n  mergePermanentElements: (permanentElements) ->\n    for elm in permanentElements\n      shallowPlaceholder = document.getElementById(elm.id)\n      if shallowPlaceholder\n        shallowPlaceholder.parentNode.replaceChild(elm, shallowPlaceholder)\n\n  mergeCachedPermanentElements: ->\n    @mergePermanentElements(@cache.get('elements', []))\n\n  scrollTo: (scrollX, scrollY) ->\n    window.scrollTo(scrollX, scrollY)\n\n  extractHeadTags: (html) ->\n    head = html.getElementsByTagName('head')\n    if head.length is 1\n      head = head[0]\n      head.getElementsByTagName 'meta'\n    else\n      []\n\n  extractTitle: (html) ->\n    titleTags = html.getElementsByTagName 'title'\n    if titleTags.length is 1\n      titleTags[0].innerHTML\n    else\n      document.title\n\n  updateTitle: (title) ->\n    document.title = title\n\n  mergeHeadTags: (tags) ->\n    for meta in tags\n      continue unless meta and meta.name\n      currentMeta = document.querySelector \"meta[name=\\\"#{meta.name}\\\"]\"\n      if currentMeta\n        currentMeta.content = meta.content\n      else\n        document.head.appendChild(meta)\n\n  extractBody: (html) ->\n    body = html.getElementsByTagName 'body'\n    if body.length is 1\n      body[0]\n    else\n      throw new Error(\"body tag not found in HTML\")\n\n  replaceAndCacheStagedBody: (body) ->\n    scrollX = window.pageXOffset\n    scrollY = window.pageYOffset\n    @removeAndCachePermanentElements()\n    stagedBody = document.body.parentNode.replaceChild(body, document.body)\n    @mergeCachedPermanentElements()\n    Locflow.snapshot.cacheStagedBody(stagedBody, scrollX, scrollY)\n\n  render: (htmlString) ->\n    el = document.createElement 'html'\n    el.innerHTML = htmlString\n    @updateTitle(@extractTitle(el))\n    @mergeHeadTags(@extractHeadTags(el))\n    @replaceAndCacheStagedBody(@extractBody(el))\n","class Locflow.Snapshot\n  constructor: ->\n    @cache = new Locflow.Cache()\n\n  stage: (path, title) ->\n    @staged =\n      path: path\n      title: title\n\n  cacheStagedBody: (body, scrollX, scrollY) ->\n    if @staged\n      @cache.put(@staged.path, {\n        body, scrollX, scrollY, title: @staged.title\n      })\n      @staged = null\n\n  render: (url) ->\n    record = @cache.get(url)\n    if record\n      Locflow.renderer.replaceAndCacheStagedBody(record.body)\n      Locflow.renderer.scrollTo(record.scrollX, record.scrollY)\n      Locflow.renderer.updateTitle(record.title)\n\nLocflow.snapshot = new Locflow.Snapshot()\n","class Locflow.Url\n  constructor: (url) ->\n    if url instanceof Locflow.Url\n      @copyFromUrl(url)\n    else if url and url.host and url.pathname\n      @copyFromLocation(url)\n    else if 'string' is typeof url\n      @initializeFromString(url)\n\n  copyFromUrl: (url) ->\n    @protocol = url.protocol\n    @domain = url.domain\n    @query = url.query\n    @path = url.path\n    @port = url.port\n    @hash = url.hash\n\n  copyFromLocation: (location) ->\n    @protocol = location.protocol.replace ':', ''\n    @domain = location.host\n    @query = location.search\n    @path = location.pathname\n    @port = location.port\n    @hash = location.hash\n    if @domain.indexOf(':') isnt -1\n      @domain = @domain.split(':')[0]\n\n  initializeFromString: (url) ->\n    regex = /(file|http[s]?:\\/\\/)?([^\\/?#]*)?([^?#]*)([^#]*)([\\s\\S]*)/i\n    matches = url.toLowerCase().match(regex)\n    if matches\n      @protocol = (matches[1] or '').replace('://', '')\n      @domain = matches[2] or ''\n      @path = matches[3]\n      @query = matches[4]\n      @hash = matches[5]\n      @port = ''\n      if @domain.indexOf(':') isnt -1\n        parts = @domain.split ':'\n        @domain = parts[0]\n        @port = parts[1]\n\n  toString: ->\n    urlStr = ''\n    urlStr += if @protocol then @protocol + '://' else document.location.protocol + '//'\n    urlStr += if @domain then @domain else document.location.host\n    urlStr += if @port then ':' + @port else ''\n    urlStr + (@path or '/') + @query + @hash\n\n  queryObject: ->\n    new Locflow.Encoding.QueryString(@query).toJson()\n\n  setQueryObject: (obj) ->\n    @query = '?' + new Locflow.Encoding.Json(obj).toQueryString()\n\n  withoutHash: ->\n    hashless = new Locflow.Url(this)\n    hashless.hash = ''\n    hashless\n\n  format: ->\n    if @path.indexOf('.json') is @path.length - '.json'.length\n      'json'\n    else if @path.indexOf('.js') is @path.length - '.js'.length\n      'js'\n    else\n      'html'\n\n  match: (other) ->\n    pathParams = @matchPath other\n    hashParams = @matchHash other\n    return false unless pathParams and hashParams\n    Locflow.mergeObjects pathParams, hashParams\n\n  matchPath: (other) ->\n    other = new Locflow.Url(other) unless other instanceof Locflow.Url\n    return {} if @path is other.path\n    paths = @path.replace(/\\/$/, '').split '/'\n    otherPaths = other.path.replace(/\\/$/, '').split '/'\n    return false if paths.length isnt otherPaths.length\n    namedParams = {}\n    for path, index in paths\n      otherPath = otherPaths[index]\n      if /^\\:/.test path\n        path = path.replace /^\\:/, ''\n        if namedParams[path]\n          throw new Error \"url [#{@toString()}] has multiple named parameters [:#{path}]\"\n        namedParams[path] = otherPath\n      else if path isnt otherPath\n        return false\n    namedParams\n\n  matchHash: (url) ->\n    url = new Locflow.Url(url) unless url instanceof Locflow.Url\n    return {} if @hash is url.hash\n    hashEncoding = new Locflow.Encoding.QueryString(@hash.replace('#', ''))\n    targetHashEncoding = new Locflow.Encoding.QueryString(url.hash.replace('#', ''))\n    return false unless hashEncoding.isValid() and targetHashEncoding.isValid()\n    hashQuery = hashEncoding.toJson()\n    targetHashQuery = targetHashEncoding.toJson()\n    namedParams = {}\n    for key, attr of hashQuery\n      if attr.indexOf(':') is 0\n        return false unless targetHashQuery[key]\n        if namedParams[attr.replace(':', '')] isnt undefined\n          throw new Error \"hash [#{@hash}] has multiple parameters [#{attr}]\"\n        namedParams[attr.replace(':', '')] = targetHashQuery[key]\n      else\n        return false if attr isnt targetHashQuery[key]\n    namedParams\n","Locflow.cloneArray = (source) ->\n  source.map (elm) -> elm\n\nLocflow.mergeObjects = (obj1, obj2) ->\n  merged = {}\n  merged[key] = value for key, value of obj2\n  merged[key] = value for key, value of obj1\n  merged\n","class Locflow.Visit\n  constructor: (@url, @opts = { action: 'advance' }) ->\n    @action = @opts.action\n    @state = 'initialized'\n    @stateHistory = [@state]\n    @timing = {}\n    @timeoutMillis = 4000\n\n  setState: (@state) ->\n    @stateHistory.push @state\n\n  propose: ->\n    @setState 'proposed'\n    Locflow.adapter?.visitProposed(@)\n\n  restore: ->\n    @setState 'restored'\n    @trackTiming 'restore'\n    Locflow.router.restore(@)\n\n  loadCachedSnapshot: ->\n    Locflow.snapshot.render(@url.toString())\n\n  start: ->\n    @setState 'started'\n    @trackTiming 'start'\n    Locflow.router.invokeVisit(@)\n    Locflow.adapter?.visitRequestStarted(@)\n\n  callHandlersIfNotRestore: ->\n    @callHandlers() if @action isnt 'restore'\n\n  callHandlers: ->\n    Locflow.handler?.call @url\n\n  render: ->\n    Locflow.renderer?.render(@requestResponse)\n    @finish()\n\n  finish: ->\n    Locflow.adapter?.visitRequestFinished(@)\n\n  progress: (value) ->\n    Locflow.adapter?.visitRequestProgressed(value)\n\n  sendRequest: ->\n    @request = Locflow.Request.GET @url,\n      success: @onRequestSuccess.bind(@)\n      error: @onRequestError.bind(@)\n      timeout: @onRequestTimeout.bind(@)\n      timeoutMillis: @timeoutMillis\n\n  onRequestSuccess: (@requestResponse, @requestStatus, xhr) ->\n    Locflow.adapter?.visitRequestCompleted(@)\n\n  onRequestError: (@requestResponse, @requestStatus, xhr) ->\n    Locflow.adapter?.visitRequestFailedWithStatusCode(@)\n\n  onRequestTimeout: ->\n    Locflow.adapter?.visitRequestTimeout(@)\n\n  changeHistory: () ->\n    return @advanceHistory() if @opts.action is 'advance'\n    return @replaceHistory() if @opts.action is 'replace'\n\n  advanceHistory: ->\n    history.pushState { locflow: true }, null, @url\n\n  replaceHistory: ->\n    history.replaceState { locflow: true }, null, @url\n\n  trackTiming: (step) ->\n    @timing[step] = new Date().getTime()\n","class Locflow.Handler\n  constructor: ->\n    @handlers = []\n\n  match: (path, callback) ->\n    url = new Locflow.Url(path)\n    @handlers.push\n      url: url\n      callback: callback\n\n  sameMatchRule: (handler1, handler2) ->\n    handler1.url.path is handler2.url.path and handler1.url.hash is handler2.url.hash\n\n  find: (path) ->\n    url = new Locflow.Url(path)\n    firstMatch = null\n    @handlers.filter (handler) =>\n      return @sameMatchRule(firstMatch, handler) if firstMatch\n      if handler.url.match(url)\n        firstMatch = handler\n        return true\n\n  call: (path) ->\n    for handler in @find(path)\n      handler.callback(handler.url.match(new Locflow.Url(path)))\n","class Locflow.Adapter.Browser\n  constructor: ->\n    @progressBar = new Locflow.ProgressBar()\n\n  visitProposed: (visit) ->\n    visit.start()\n\n  visitRequestStarted: (visit) ->\n    visit.changeHistory()\n    if visit.action is 'restore'\n      visit.restore()\n    else\n      visit.loadCachedSnapshot()\n    @progressBar.setValue(0)\n    @progressBar.show()\n\n  visitRequestProgressed: (value) ->\n    @progressBar.setValue value\n\n  visitRequestCompleted: (visit) ->\n    visit.render()\n\n  visitRequestFinished: (visit) ->\n    @progressBar.setValue(100)\n    setTimeout(=>\n      @progressBar.hide()\n    , 50)\n    visit.callHandlersIfNotRestore()\n\n  visitRequestFailedWithStatusCode: (visit) ->\n    console.log 'VISIT FAILED'\n\n  visitRequestTimeout: (visit) ->\n    console.log 'VISIT TIMEOUTED'\n","","","class Locflow.Encoding.Json\n  constructor: (@json) ->\n\n  toQueryString: ->\n    flatMap = @generateFlatArray()\n    return '' if Object.keys(flatMap).length is 0\n    flatMap.map((pair) => @encodeKeyValuePair(pair))\n    .reduce((arr, val) -> arr.concat(val))\n    .reduce((query, pair) ->\n      query += \"#{pair}&\"\n    , '')\n    .replace(/\\&$/, '')\n\n  generateFlatArray: (target = [], path = [], json = @json) ->\n    for key, value of json\n      keyPath = Locflow.cloneArray path\n      keyPath.push key\n      if typeof value is 'object' and not Array.isArray(value)\n        @generateFlatArray target, keyPath, value\n      else\n        target.push {key: keyPath, value: value}\n    target\n\n  encodeKeyValuePair: ({ key, value }) ->\n    if Array.isArray(value) and value.length > 1\n      value.map((singleValue) =>\n        @encodeSingleKeyValuePair({ key, value: [singleValue] })\n      ).reduce((arr, val) -> arr.concat(val))\n    else\n      @encodeSingleKeyValuePair({ key, value })\n\n  encodeSingleKeyValuePair: ({ key, value }) ->\n    if Array.isArray value\n      suffix = '[]'\n      value = value[0]\n    else\n      suffix = ''\n    value = encodeURI value\n    if key.length is 1\n      [\"#{key[0]}#{suffix}=#{value}\"]\n    else\n      joinedKey = key[0]\n      joinedKey += \"[#{path}]\" for path in key.slice(1)\n      [\"#{joinedKey}#{suffix}=#{value}\"]\n","class Locflow.Encoding.QueryString\n  constructor: (query) ->\n    @query = query.replace('?', '')\n\n  toJson: ->\n    @generateNestedMap(@generateFlatMap())\n\n  isValid: ->\n    flatMap = @generateFlatMap()\n    return Object.keys(flatMap).length > 0\n\n  generateNestedMap: (flatMap) ->\n    nested = {}\n    for key in Object.keys(flatMap)\n      nestedPath = @findNestedPath(key)\n      @assignNestedValue(nested, nestedPath, flatMap[key])\n    nested\n\n  findNestedPath: (key) ->\n    pathRegex = /^[^\\[\\]]+(\\[[^\\[\\]]*\\])*$/\n    return [key] unless key.match pathRegex\n    key.split('[')\n      .map((path) -> path.replace(']', '').trim())\n      .filter((step) -> step.trim() isnt '')\n\n  assignNestedValue: (map, path, value) ->\n    originalMap = map\n    for step, index in path\n      map[step] = {} unless map[step]\n      if index is path.length - 1\n        map[step] = value\n      else\n        map = map[step]\n    originalMap\n\n  generateFlatMap: ->\n    queryParts = @query.split('&')\n    pairs = {}\n    for queryPart in queryParts\n      @mergeKeyValuePair(pairs, @splitKeyValue(queryPart))\n    pairs\n\n  mergeKeyValuePair: (pairs, { key, value } = {}) ->\n    return pairs unless key and value\n    if pairs[key] and Array.isArray(pairs[key])\n      pairs[key].push value\n    else if pairs[key]\n      pairs[key] = [pairs[key], value]\n    else\n      pairs[key] = if /\\[\\]$/.test(key) then [value] else value\n\n  splitKeyValue: (queryPart) ->\n    values = queryPart.split '='\n    return if values.length != 2\n    { key: values[0], value: decodeURIComponent(values[1]) }\n"],"sourceRoot":"/source/"}